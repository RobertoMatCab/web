(function(t){function e(e){for(var i,s,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},o={app:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"034f":function(t,e,a){"use strict";var i=a("8a23"),o=a.n(i);o.a},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id="4678"},"8a23":function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s=(a("d3b7"),a("25f0"),a("bc3a")),n=a.n(s),l=a("8aa5"),c=a.n(l),d={name:"app",components:{},data:function(){return{info:null,loading:!0,errored:!1,fecha:null,token:null,usuario:{dato1:null,dato2:null,email:null,password:null,apellido:null,nombre:"null",foto:null,tokens:[],db:l["firestore"]()}}},created:function(){var t=this;if(l["auth"]().currentUser){var e=l["firestore"](),a=l["auth"]().currentUser.uid,o=this;console.log(a),e.collection("Usuarios").doc(a).onSnapshot((function(t){o.usuario.nombre=t.data().nombre,o.usuario.email=t.data().email,o.usuario.apellido=t.data().apellido,o.usuario.email=t.data().email,o.usuario.password=t.data().password,o.usuario.tokens=t.data().tokens,o.usuario.foto=t.data().foto}))}if(l["auth"]().currentUser&&void 0==i["a"].prototype.$appName){console.log("pedir notificacion");var r=this,s=!0,n=0,c=l["messaging"]();c.usePublicVapidKey("BAzdi2QjOv1jdumjVOAmC0SBts9ukMpmWEMGk2iIF12m672JJ7W8LryLRBRitvtC_iBPMcg0w7gEU9IHaMblR5s"),c.requestPermission().then((function(){console.log("Notification permission granted."),c.getToken().then((function(e){for(console.log(e),console.log(r.usuario.tokens.length),console.log("--"+r.usuario.tokens),n=0;n<r.usuario.tokens.length;n++)r.usuario.tokens[n]==e&&(s=!1);1==s&&(r.usuario.tokens.push(e),l["firestore"]().collection("Usuarios").doc(l["auth"]().currentUser.uid).update({tokens:l["firestore"].FieldValue.arrayUnion(e)}).then((function(){console.log("escrito")})).catch((function(t){console.error("Error adding document: ",t)}))),t.token=e,i["a"].prototype.$appName=e}))})).catch((function(t){console.log("Unable to get permission to notify.",t)}))}this.datos()},methods:{datos:function(){var t=this,e=l["firestore"](),a=new Date;if(this.fecha="("+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+")  "+a.getDate()+"/"+a.getMonth()+"/"+a.getFullYear(),n.a.get("https://www.purpleair.com/json?key=IDGMUICNIE6W5ML6&show=22085").then((function(e){return t.info=e.data.bpi})).then((function(e){return t.info=e.data.results[0]})).catch((function(t){return console.log(t)})).finally((function(){return t.loading=!1})),null!=this.info){console.log("entro");var i=this.info.ID.toString();console.log(e+i)}else console.log("no entro")}}},u=d,m=(a("034f"),a("2877")),p=a("6544"),h=a.n(p),g=a("7496"),v=Object(m["a"])(u,o,r,!1,null,null,null),f=v.exports;h()(v,{VApp:g["a"]});a("45fc");var b=a("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return!0===this.verificacion?a("v-container",{staticClass:"home ma-0 pa-0",attrs:{fluid:""}},[!0===this.verificacion&&!0===this.dataReady?a("div",[a("barra-superior",{attrs:{titulo:t.titulo}}),1==t.usuario.primeraVez?a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.usuario.primeraVez,callback:function(e){t.$set(t.usuario,"primeraVez",e)},expression:"usuario.primeraVez"}},[a("v-card",[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"#05c5ff"}},[a("span",{staticClass:"headline"},[t._v("Primer login")])]),a("v-card-text",[t._v(" Como primer login, se te ha asignado un hogar por defecto."),a("br")]),a("v-card-actions",{staticClass:"text-center justify-center"},[a("v-spacer"),a("v-btn",{staticStyle:{background:"#FF5D5E",width:"40%"},attrs:{text:""},on:{click:t.funcionClose}},[t._v("Cerrar ")])],1)],1)],1)],1):a("div",[1==this.dataReady?a("v-row",{staticClass:"text-center justify-center;",staticStyle:{"margin-top":"60px"},attrs:{"no-gutters":"",justify:"space-around"}},[t._l(t.lista_hogares,(function(e){return a("v-container",{key:e.id},[a("v-card",{staticStyle:{padding:"0px"}},[a("v-card-title",{staticClass:"text-center justify-center pa-0"},[t._v(" "+t._s(e.apodo)+" "),0==e.estado?a("div",{staticStyle:{"margin-left":"6px!important"}},[a("v-icon",{attrs:{color:"red"}},[t._v(" mdi-exclamation-thick ")])],1):a("div",{staticStyle:{"margin-left":"6px!important"}},[a("v-icon",{attrs:{color:"green"}},[t._v(" mdi-check-outline ")])],1)]),a("v-divider"),t._l(e.vectorSensores,(function(e){return a("div",{key:e.id,staticStyle:{display:"inline-block"}},t._l(t.lista_IdSensores,(function(i){return a("div",{key:i.id},[i.id==e?a("div",{staticClass:"ma-2"},[a("v-btn",{staticClass:"mx-2",staticStyle:{margin:"3px"},attrs:{fab:"",large:""},on:{click:function(e){return t.botonDetalles(i)}}},[a("v-icon",{staticStyle:{width:"60%"}},[t._v(" mdi-access-point ")]),1==i.estado?a("div",[a("v-icon",{staticStyle:{width:"30%"},attrs:{color:"green"}},[t._v(" mdi-check-outline ")])],1):a("div",[a("v-icon",{staticStyle:{width:"30%"},attrs:{color:"red"}},[t._v(" mdi-exclamation-thick ")])],1)],1),a("br"),t._v(" "+t._s(i.apodo)+" ")],1):t._e()])})),0)})),0==e.vectorSensores.length?a("div",[a("v-card-text",[t._v(" Sin sensores asociados aún ")])],1):t._e()],2)],1)})),0==t.lista_hogares.length?a("div",{staticStyle:{margin:"10%"}},[0!=this.dataReady?a("v-layout",{staticStyle:{"margin-top":"60px"},attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):a("h4",{staticStyle:{"margin-top":"60px",background:"aquamarine"}},[!0===this.dataReady?a("div",[t._v(" No hay hogares registrados aún"),a("br"),a("h4",{staticStyle:{"font-weight":"bold"}},[t._v("Registra un hogar para poder asociar un sensor")])]):t._e()])],1):t._e()],2):a("v-row",[a("v-layout",{staticStyle:{"margin-top":"60px"},attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1)],1)],1)],1):t._e()]):a("v-container",[a("div",{staticClass:"mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"},[a("v-card",{staticStyle:{"margin-top":"20%",background:"deepskyblue"}},[a("h2",[t._v(" Vaya al correo registrado y verifique usuario. ")])])],1)])},w=[],x=(a("c740"),a("4160"),a("b680"),a("159b"),a("5530")),k=(a("96cf"),a("1da1")),_=a("2f62"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"mx-auto overflow-hidden ma-0 pa-0"},[a("v-app-bar",{attrs:{color:"#05c5ff",dark:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!0}}}),a("v-toolbar-title",{attrs:{id:"titulo-nombre"}},[t._v(" "+t._s(t.titulo)+" ")])],1),a("v-navigation-drawer",{staticStyle:{width:"auto"},attrs:{fixed:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"blue--text text--accent-4"}},["PERFIL"===this.titulo?a("v-list-item",{staticClass:"px-2",staticStyle:{background:"lightskyblue"},on:{click:t.funcionEditarPerfil}},[a("v-icon",[t._v("mdi-account-outline")]),a("v-list-item-title",[t._v("PERFIL")])],1):a("v-list-item",{staticClass:"px-2",on:{click:t.funcionEditarPerfil}},[a("v-icon",[t._v("mdi-account-outline")]),a("v-list-item-title",[t._v("PERFIL")])],1),"Home"==this.titulo?a("v-list-item",{staticStyle:{background:"lightskyblue"},on:{click:t.funcionHome}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.home.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.home.title))])],1)],1):a("v-list-item",{on:{click:t.funcionHome}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.home.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.home.title))])],1)],1),"Hogares"==this.titulo?a("v-list-item",{staticStyle:{background:"lightskyblue"},on:{click:t.funcionHogares}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.hogares.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.hogares.title))])],1)],1):a("v-list-item",{on:{click:t.funcionHogares}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.hogares.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.hogares.title))])],1)],1),"Dispositivos"==this.titulo?a("v-list-item",{staticStyle:{background:"lightskyblue"},on:{click:t.funcionDsipositivos}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.dispositivos.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.dispositivos.title))])],1)],1):a("v-list-item",{on:{click:t.funcionDsipositivos}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.dispositivos.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.dispositivos.title))])],1)],1),"Alertas"==this.titulo?a("v-list-item",{staticStyle:{background:"lightskyblue"},on:{click:t.funcionAlertas}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.alertas.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.alertas.title))])],1)],1):a("v-list-item",{on:{click:t.funcionAlertas}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.alertas.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.alertas.title))])],1)],1),a("v-list-item",{on:{click:t.funcionCerrarSesion}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(t.cerrarSesion.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.cerrarSesion.title))])],1)],1)],1)],1)],1)],1)},C=[],D=(a("a434"),a("ac1f"),a("5319"),{props:{titulo:{type:[String],required:!0,default:null},token:{type:[String],required:!1,default:null}},name:"BarraSuperior",data:function(){return{usuario:{dato1:null,dato2:null,email:null,password:null,apellido:null,nombre:"null",foto:null,tokens:[],primeraVez:null,db:l["firestore"]()},home:{title:"Home",icon:"mdi-home-outline",clickFuncion:"funcionHome"},hogares:{title:"Hogares",icon:"mdi-home-city-outline",clickFuncion:"funcionHogares"},dispositivos:{title:"Dispositivos",icon:"mdi-leak",clickFuncion:"funcionDispositivos"},alertas:{title:"Notificaciones",icon:"mdi-alarm-light-outline",clickFuncion:"funcionAlertas"},cerrarSesion:{title:"Cerrar Sesión",icon:"mdi-close-octagon-outline",clickFuncion:"funcionCerrarSesion"},drawer:!1}},created:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l["firestore"](),a=l["auth"]().currentUser.uid,i=this,console.log(a),t.next=6,e.collection("Usuarios").doc(a).get().then((function(t){i.usuario.nombre=t.data().nombre,i.usuario.email=t.data().email,i.usuario.apellido=t.data().apellido,i.usuario.primeraVez=t.data().primeraVez,i.usuario.password=t.data().password,i.usuario.foto=t.data().foto,i.usuario.tokens=t.data().tokens,console.log("Nombre: "+i.usuario.nombre)}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{funcionHome:function(){var t=this;l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("home"),console.log(e)}),(function(t){console.log("Opps "+t.message)}))},funcionHogares:function(){var t=this;l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("Hogares"),console.log(e)}),(function(t){console.log("Opps "+t.message)}))},funcionDsipositivos:function(){var t=this;console.log("voy a dispositivos"),l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("Dispositivos"),console.log(e)}),(function(t){console.log("Opps "+t.message)}))},funcionAlertas:function(){var t=this;console.log("voy a alertas"),l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("Alertas"),console.log(e)}),(function(t){console.log("Opps "+t.message)}))},funcionCerrarSesion:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("AppName tiene: "+this.$appName),e=0;case 2:if(!(e<this.usuario.tokens.length)){t.next=11;break}if(this.usuario.tokens[e]!=this.$appName){t.next=8;break}return console.log("Borro el token: "+this.usuario.tokens[e]),this.usuario.tokens.splice(e,1),t.next=8,l["firestore"]().collection("Usuarios").doc(l["auth"]().currentUser.uid).update({tokens:this.usuario.tokens}).then((function(){console.log("escrito")})).catch((function(t){console.error("Error adding document: ",t)}));case 8:e++,t.next=2;break;case 11:console.log("Salgo, y el token que tengo es: "+this.token+" (Ya deberia estar borrado)"),l["auth"]().signOut().then((function(){a.$router.replace("login")}));case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),funcionEditarPerfil:function(){var t=this;console.log("funcion ir perfil"),l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("EditarPerfil"),console.log(e)}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message)}))}}}),A=D,j=a("40dc"),H=a("5bc1"),V=a("a523"),P=a("132d"),E=a("8860"),M=a("da13"),I=a("5d23"),R=a("1baa"),T=a("34c3"),z=a("f774"),B=a("2a7f"),L=Object(m["a"])(A,S,C,!1,null,"3ec65612",null),O=L.exports;h()(L,{VAppBar:j["a"],VAppBarNavIcon:H["a"],VContainer:V["a"],VIcon:P["a"],VList:E["a"],VListItem:M["a"],VListItemContent:I["a"],VListItemGroup:R["a"],VListItemIcon:T["a"],VListItemTitle:I["b"],VNavigationDrawer:z["a"],VToolbarTitle:B["a"]}),i["a"].config.devtools=!0;var F={name:"Home",components:{BarraSuperior:O},data:function(){return{dataReady:!1,titulo:"Home",home:{title:"Home",icon:"mdi-home-city",clickFuncion:"funcionHome"},hogares:{title:"Hogares",icon:"mdi-home-city",clickFuncion:"funcionHogares"},dispositivos:{title:"Dispositivos",icon:"mdi-home-city",clickFuncion:"funcionDispositivos"},alertas:{title:"Alertas",icon:"mdi-home-city",clickFuncion:"funcionAlertas"},verificacion:null,datosCargados:!1,mini:!0,drawer:!0,lista_hogares:null,lista_IdSensores:[],usuario:{dato1:null,dato2:null,email:null,password:null,primeraVez:null,apellido:null,nombre:null,tokens:null,foto:null,db:l["firestore"]()}}},filters:{currencydecimal:function(t){return t.toFixed(2)}},watch:{verificacion:function(t){1==t?console.log("FORZAMOS"):console.log("NO FORZAMOS")},lista_hogares:function(){var t=this;t.lista_hogares.forEach((function(e){var a=!0,i=-1;e.vectorSensores.forEach((function(e){i=t.lista_IdSensores.findIndex((function(t){return t.identificacion==e})),a=a&&t.lista_IdSensores[i].estado})),e.estado=a}))}},created:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l["firestore"](),a=l["auth"]().currentUser.uid,i=this,i.verificacion="Cf3bZ48IqxgS3iktsXy2HvH1LDx2"==a||l["auth"]().currentUser.emailVerified,t.next=6,e.collection("Usuarios").doc(a).get().then((function(t){i.usuario.nombre=t.data().nombre,i.usuario.email=t.data().email,i.usuario.apellido=t.data().apellido,i.usuario.primeraVez=t.data().primeraVez,i.usuario.password=t.data().password,i.usuario.foto=t.data().foto,i.usuario.tokens=t.data().tokens,console.log("Nombre: "+i.usuario.nombre)}));case 6:return console.log(a),t.next=9,e.collection("Dispositivos").where("usuarioAsociado","==",a).onSnapshot((function(t){i.lista_IdSensores=[],i.lista_hogares=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data());i.lista_IdSensores.push(e)})),e.collection("Hogares").where("usuarioAsociado","==",a).onSnapshot((function(t){i.lista_hogares=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data());i.lista_hogares.push(e)}))}))}));case 9:0==this.verificacion&&setInterval(this.comprobar,3e3),console.log("1--\x3e "+this.verificacion),this.dataReady=!0;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:Object(x["a"])({},Object(_["b"])(["guardarUsuario"]),{comprobar:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=l["auth"]().currentUser,null!=e&&e.reload(),null!=e&&(this.verificacion=l["auth"]().currentUser.emailVerified);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),funcionClose:function(){var t=this;this.usuario.primeraVez=!1;var e=l["firestore"]().collection("Hogares").doc();e.set({idHogar:e.id,direccion:null,apodo:"Hogar por defecto ",usuarioAsociado:l["auth"]().currentUser.uid,vectorSensores:[]}),console.log(e.id),l["firestore"]().collection("Usuarios").doc(l["auth"]().currentUser.uid).set({primeraVez:!1},{merge:!0}).then((function(){})).catch((function(t){console.error("Error adding document: ",t)})),console.log("pedir notificacion");var a=this,o=!0,r=0,s=l["messaging"]();s.usePublicVapidKey("BAzdi2QjOv1jdumjVOAmC0SBts9ukMpmWEMGk2iIF12m672JJ7W8LryLRBRitvtC_iBPMcg0w7gEU9IHaMblR5s"),s.requestPermission().then((function(){console.log("Notification permission granted."),s.getToken().then((function(e){for(console.log(e),console.log(a.usuario.tokens.length),console.log("--"+a.usuario.tokens),r=0;r<a.usuario.tokens.length;r++)a.usuario.tokens[r]==e&&(o=!1);1==o&&(a.usuario.tokens.push(e),l["firestore"]().collection("Usuarios").doc(l["auth"]().currentUser.uid).update({tokens:l["firestore"].FieldValue.arrayUnion(e)}).then((function(){console.log("escrito")})).catch((function(t){console.error("Error adding document: ",t)}))),t.token=e,i["a"].prototype.$appName=e}))})).catch((function(t){console.log("Unable to get permission to notify.",t)}))},botonDetalles:function(t){var e=this;console.log("pulsado boton detalles "+t.apodo);var a=t.identificacion;l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(i){e.$router.push({name:"DetallesDispositivo",params:{idSensor:a,apodo:t.apodo,origen:"home"}}),console.log(i)}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message)}))}})},N=F,U=a("8336"),q=a("b0af"),W=a("99d9"),$=a("169a"),Z=a("ce7e"),G=a("a722"),J=a("490a"),Y=a("0fd9"),K=a("2fa4"),Q=Object(m["a"])(N,y,w,!1,null,null,null),X=Q.exports;h()(Q,{VBtn:U["a"],VCard:q["a"],VCardActions:W["a"],VCardText:W["c"],VCardTitle:W["d"],VContainer:V["a"],VDialog:$["a"],VDivider:Z["a"],VIcon:P["a"],VLayout:G["a"],VProgressCircular:J["a"],VRow:Y["a"],VSpacer:K["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login ma-0 pa-0",attrs:{align:"center"}},[a("div",{staticStyle:{margin:"10px"}},[a("div",{staticStyle:{"padding-top":"30px"},attrs:{align:"center"}},[a("v-img",{staticStyle:{width:"70%","max-width":"400px"},attrs:{src:"/img/icons/RobertoLogo.png"}})],1),a("h3",[t._v("Iniciar sesión")]),a("v-form",{staticStyle:{margin:"10px","max-width":"600px"},attrs:{align:"center"}},[a("v-text-field",{ref:"email",attrs:{label:"Correo",rules:[t.rules.requiredEmail,t.rules.email],counter:"",outlined:"",clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("br"),a("v-text-field",{ref:"contrasena",staticClass:"input-group--focused",attrs:{"append-icon":t.show3?"mdi-eye":"mdi-eye-off",rules:[t.rules.requiredContrasena,t.rules.min],type:t.show3?"text":"password",label:"Contraseña",counter:"",outlined:""},on:{"click:append":function(e){t.show3=!t.show3}},model:{value:t.contrasena,callback:function(e){t.contrasena=e},expression:"contrasena"}})],1),a("p",[a("router-link",{attrs:{to:"/RecuperarContraseña"}},[t._v("¿Has olvidado la contraseña?")])],1),a("br"),a("v-btn",{ref:"login",staticStyle:{color:"aqua",background:"red"},attrs:{rounded:"",color:"primary"},on:{click:t.login}},[t._v("Iniciar sesión")]),a("br"),a("h4",[t._v("¿No tienes una cuenta? Puedes crearte una pulsando "),a("router-link",{attrs:{to:"/sign-up"}},[t._v("aquí")])],1)],1)])},et=[],at={name:"Login",data:function(){var t=this;return{email:"",pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,pulsadoLogin:!1,contrasena:"",show3:!1,emailValido:!0,contrasenaValido:!0,usuario:{dato1:null,dato2:null,email:null,password:null,apellido:null,tokens:null,nombre:null,foto:null,db:c.a.firestore()},rules:{requiredEmail:function(){return t.emailRequerido()||"Campo requerido."},requiredContrasena:function(){return t.contrasenaRequerido()||"Campo requerido."},min:function(){return t.contrasenaMinimo8()||"Mínimo 8 carácteres"},email:function(){return t.emailFormatoValido()||"Email no válido."}}}},watch:{email:function(){this.email&&this.email.length>0&&this.pattern.test(this.email)&&(this.emailValido=!0)},contrasena:function(){this.contrasena&&this.contrasena.length>=8&&(this.contrasenaValido=!0)}},created:function(){this.email="",this.contrasena=""},methods:{emailRequerido:function(){return!!this.emailValido||(null!=this.email&&this.email.length>0||(console.log("emailr"),!1))},contrasenaRequerido:function(){if(this.contrasenaValido)return!0;var t=null!=this.contrasena&&this.contrasena.length>0;return t},contrasenaMinimo8:function(){return!!this.contrasenaValido||this.contrasena.length>=8},emailFormatoValido:function(){return!!this.emailValido||this.pattern.test(this.email)},login:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.email&&0!=this.email.length&&this.pattern.test(this.email)||(this.emailValido=!1),(!this.contrasena||this.contrasena.length<8)&&(this.contrasenaValido=!1),this.emailValido&&this.contrasenaValido){t.next=6;break}return this.$refs.email.validate(),this.$refs.contrasena.validate(),t.abrupt("return");case 6:return this.pulsadoLogin=!0,e=this,t.next=10,c.a.auth().signInWithEmailAndPassword(this.email,this.contrasena).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(c.a.auth().currentUser.uid),t.next=3,c.a.firestore().collection("Usuarios").doc(c.a.auth().currentUser.uid).get().then((function(t){if(e.usuario.nombre=t.data().nombre,e.usuario.email=t.data().email,e.usuario.apellido=t.data().apellido,e.usuario.password=t.data().password,e.usuario.foto=t.data().foto,e.usuario.tokens=t.data().tokens,console.log("Nombre: "+e.usuario.nombre),c.a.auth().currentUser)if(void 0!=i["a"].prototype.$appName)console.log("eo que estoy aqui"+i["a"].prototype.$appName),console.log("EL TOKEN YA EXISTE, se añade"),e.usuario.tokens.push(i["a"].prototype.$appName),c.a.firestore().collection("Usuarios").doc(c.a.auth().currentUser.uid).update({tokens:c.a.firestore.FieldValue.arrayUnion(i["a"].prototype.$appName)}).then((function(){console.log("escrito")})).catch((function(t){console.error("Error adding document: ",t)})),e.$router.replace("home"),console.log(a);else try{console.log("EL TOKEN NO EXISTE,pedir notificacion");var o=!0,r=0,s=c.a.messaging();s.usePublicVapidKey("BAzdi2QjOv1jdumjVOAmC0SBts9ukMpmWEMGk2iIF12m672JJ7W8LryLRBRitvtC_iBPMcg0w7gEU9IHaMblR5s"),s.requestPermission().then((function(){console.log("Notification permission granted."),s.getToken().then((function(t){for(console.log(t),console.log(e.usuario.tokens.length),console.log("--"+e.usuario.tokens),r=0;r<e.usuario.tokens.length;r++)e.usuario.tokens[r]==t&&(o=!1);1==o&&(console.log("El token no existe, se añade"),e.usuario.tokens.push(t),c.a.firestore().collection("Usuarios").doc(c.a.auth().currentUser.uid).update({tokens:c.a.firestore.FieldValue.arrayUnion(t)}).then((function(){console.log("escrito")})).catch((function(t){console.error("Error adding document: ",t)}))),i["a"].prototype.$appName=t,e.$router.replace("home"),console.log(a)}))})).catch((function(t){i["a"].prototype.$appName=void 0,console.log("Unable to get permission to notify.Vamos, que no quiere que le turres",t),e.$router.replace("home"),console.log(a)}))}catch(n){console.error(n),e.$router.replace("home")}}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){alert("Error: El ususario no existe o los datos están mal introducidos"),console.log("Opps "+t.message)}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},it=at,ot=a("4bd4"),rt=a("adda"),st=a("8654"),nt=Object(m["a"])(it,tt,et,!1,null,"973adba0",null),lt=nt.exports;h()(nt,{VBtn:U["a"],VForm:ot["a"],VImg:rt["a"],VTextField:st["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"EditarInformacion ma-0 pa-0"},[a("barra-superior"),a("v-row",{staticStyle:{margin:"10px"}},[a("v-list-item-avatar",{attrs:{size:"20%"},on:{click:t.funcionHolaCaracola}},[a("v-img")],1)],1),a("v-text-field",{staticStyle:{"margin-top":"60px"},attrs:{label:"Nombre",outlined:"",shaped:""},model:{value:t.usuario.nombre,callback:function(e){t.$set(t.usuario,"nombre",e)},expression:"usuario.nombre"}}),a("v-text-field",{attrs:{label:"Apellidos",outlined:"",shaped:""},model:{value:t.usuario.apellido,callback:function(e){t.$set(t.usuario,"apellido",e)},expression:"usuario.apellido"}}),a("v-row",[a("v-col",[a("v-btn",{staticStyle:{color:"aqua",background:"red"},attrs:{rounded:"",color:"primary"},on:{click:t.funcionCancelar}},[t._v("Cancelar")])],1),a("v-col",[a("v-btn",{staticStyle:{color:"aqua",background:"green"},attrs:{rounded:"",color:"primary"},on:{click:t.funcionGuardar}},[t._v("Guardar")])],1)],1)],1)},dt=[],ut={name:"EditarInformacion",components:{BarraSuperior:O},data:function(){return{nombre2:"algo",show3:!1,usuario:{email:"",password:"",apellido:"",nombre:"",foto:null,db:l["firestore"]()}}},label:"algo!",created:function(){var t=this,e=l["firestore"]();e.collection("Usuarios").doc(l["auth"]().currentUser.uid).get().then((function(e){t.usuario.nombre=e.data().nombre,t.usuario.email=e.data().email,t.usuario.apellido=e.data().apellido,t.usuario.email=e.data().email,t.usuario.password=e.data().password}));var a=l["storage"](),i=a.refFromURL("gs://vue-firebase-tutorial-7ee46.appspot.com/"+l["auth"]().currentUser.uid);console.log("algo"),console.log(i)},methods:{funcionGuardar:function(){var t=this;l["firestore"]().collection("Usuarios").doc(l["auth"]().currentUser.uid).set({nombre:this.usuario.nombre,apellido:this.usuario.apellido,password:this.usuario.password},{merge:!0}).then((function(){})).catch((function(t){console.error("Error adding document: ",t)})),l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("EditarPerfil"),console.log(e)}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message)}))},funcionCancelar:function(){console.log("Volvemos a perfil"),this.$router.replace("EditarPerfil")}}},mt=ut,pt=a("62ad"),ht=a("8270"),gt=Object(m["a"])(mt,ct,dt,!1,null,"14b7862a",null),vt=gt.exports;h()(gt,{VBtn:U["a"],VCol:pt["a"],VImg:rt["a"],VListItemAvatar:ht["a"],VRow:Y["a"],VTextField:st["a"]});var ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-up"},[a("div",{staticStyle:{"padding-top":"30px"},attrs:{align:"center"}},[a("v-img",{staticStyle:{width:"70%","max-width":"400px"},attrs:{src:"/img/icons/RobertoLogo.png"}})],1),a("h3",[t._v("Crear cuenta")]),a("v-form",{staticStyle:{"margin-left":"auto","margin-right":"auto",width:"70%"}},[a("v-text-field",{ref:"nombre",attrs:{rules:[t.rules.requiredNombre],label:"Nombre",counter:"",outlined:"",clearable:""},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}}),a("v-text-field",{ref:"apellido",attrs:{rules:[t.rules.requiredApellido],label:"Apellidos",counter:"",outlined:"",clearable:""},model:{value:t.apellido,callback:function(e){t.apellido=e},expression:"apellido"}}),a("v-text-field",{ref:"email",attrs:{label:"Correo",rules:[t.rules.requiredEmail,t.rules.email],counter:"",outlined:"",clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{ref:"password",staticClass:"input-group--focused",attrs:{"append-icon":t.show3?"mdi-eye":"mdi-eye-off",type:t.show3?"text":"password",label:"Contraseña",rules:[t.rules.requiredPassword,t.rules.min,t.rules.mismaContrasena],counter:"",outlined:""},on:{"click:append":function(e){t.show3=!t.show3}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{ref:"passwordAgain",staticClass:"input-group--focused",attrs:{"append-icon":t.show3?"mdi-eye":"mdi-eye-off",type:t.show3?"text":"password",label:"Repite contraseña",rules:[t.rules.requiredPasswordAgain,t.rules.minAgain,t.rules.mismaContrasena],counter:"",outlined:""},on:{"click:append":function(e){t.show3=!t.show3}},model:{value:t.passwordAgain,callback:function(e){t.passwordAgain=e},expression:"passwordAgain"}})],1),a("v-btn",{staticStyle:{color:"aqua",background:"red"},attrs:{rounded:"",color:"primary"},on:{click:t.singUp}},[t._v(" Registrarse ")]),a("br"),a("h4",[t._v(" o volver a "),a("router-link",{staticStyle:{color:"blue"},attrs:{to:"/login"}},[t._v("Iniciar sesión")]),t._v(" . ")],1)],1)},bt=[],yt={name:"SingUp",data:function(){var t=this;return{datosValidos:!1,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,email:"",foto:null,password:"",passwordAgain:"",combinacion:!1,apellido:"",nombre:"",show3:!1,nombreValido:!0,apellidoValido:!0,emailValido:!0,passwordValido:!0,passwordAgainValido:!0,passwordsIgualesValido:!0,rules:{requiredNombre:function(){return t.nombreRequerido()||"Campo requerido."},requiredApellido:function(){return t.apellidoRequerido()||"Campo requerido."},requiredEmail:function(){return t.emailRequerido()||"Campo requerido."},requiredPassword:function(){return t.passwordRequerido()||"Campo requerido."},requiredPasswordAgain:function(){return t.passwordRequeridoAgain()||"Campo requerido."},min:function(){return t.contrasenaMinimo8()||"Mínimo 8 carácteres"},minAgain:function(){return t.contrasenaMinimo8Again()||"Mínimo 8 carácteres"},email:function(){return t.emailFormatoValido()||"Email no válido."},iguales:function(e){return e===t.password.valueOf()||"La contraseñas no coinciden"},iguales2:function(e){return e===t.passwordAgain.valueOf()||"La contraseñas no coinciden"},mismaContrasena:function(){return t.passwordIgual()||"Las contraseñas no coinciden"}}}},watch:{nombre:function(){this.nombre&&this.nombre.length>0&&(this.nombreValido=!0)},apellido:function(){this.apellido&&this.apellido.length>0&&(this.apellidoValido=!0)},email:function(){this.email&&this.email.length>0&&this.pattern.test(this.email)&&(this.emailValido=!0)},password:function(t){this.password&&this.password.length>7&&this.password==this.passwordAgain&&(console.log("ENTRO"),this.passwordValido=!0),this.$refs.password.validate(),this.$refs.passwordAgain.validate(),t===this.passwordAgain?(this.combinacion=!0,this.$refs.passwordAgain.validate(),console.log(this.passwordAgain)):(console.log(this.passwordAgain),this.combinacion=!1)},passwordAgain:function(t){console.log("---\x3e"+this.passwordAgainValido),this.passwordAgain&&this.passwordAgain.length>7&&this.password==this.passwordAgain&&this.password==this.passwordAgain&&(this.passwordAgainValido=!0),this.$refs.password.validate(),this.$refs.passwordAgain.validate(),t===this.password?(this.combinacion=!0,this.$refs.password.validate(),console.log(this.password)):(console.log(this.password),this.combinacion=!1)},passwordIguales:function(t){t===this.passwordAgain?(this.combinacion=!0,this.$refs.passwordAgain.validate(),console.log(this.passwordAgain)):(console.log(this.passwordAgain),this.combinacion=!1)},passwordAgainIguales:function(t){t===this.password?(this.combinacion=!0,this.$refs.password.validate(),console.log(this.password)):(console.log(this.password),this.combinacion=!1)}},created:function(){this.nombre="",this.apellido="",this.passwordAgain="",this.email="",this.password=""},methods:{emailRequerido:function(){return!!this.emailValido||(null!=this.email&&this.email.length>0||(console.log("emailr"),!1))},nombreRequerido:function(){return!!this.nombreValido||(null!=this.nombre&&this.nombre.length>0||(console.log("nombre"),!1))},apellidoRequerido:function(){return!!this.apellidoValido||(null!=this.apellido&&this.apellido.length>0||(console.log("apellido"),!1))},passwordRequerido:function(){if(this.passwordValido)return!0;var t=null!=this.password&&this.password.length>0;return t},passwordRequeridoAgain:function(){if(this.passwordAgainValido)return!0;var t=null!=this.passwordAgain&&this.passwordAgain.length>0;return t},contrasenaMinimo8:function(){return!!this.passwordValido||this.password.length>=8},contrasenaMinimo8Again:function(){return!!this.passwordAgainValido||this.passwordAgain.length>=8},emailFormatoValido:function(){return!!this.emailValido||this.pattern.test(this.email)},passwordIgual:function(){return this.passwordsIgualesValido?(console.log("PASS IGUALES VALIDO"),!0):(console.log("PASS IGUALES NO VALIDO"),this.password==this.passwordAgain)},singUp:function(){var t=this;if(this.nombre&&0!=this.nombre.length||(this.nombreValido=!1),this.apellido&&0!=this.apellido.length||(this.apellidoValido=!1),this.email&&0!=this.email.length&&this.pattern.test(this.email)||(this.emailValido=!1),(!this.password||this.password.length<8||this.password!=this.passwordAgain)&&(console.log("pass mal"),this.passwordValido=!1,this.passwordsIgualesValido=!1),(!this.passwordAgain||this.passwordAgain.length<8||this.password!=this.passwordAgain)&&(console.log("passagain mal"),this.passwordAgainValido=!1,this.passwordsIgualesValido=!1),!this.nombreValido||!this.apellidoValido||!this.emailValido||!this.passwordValido||!this.passwordAgainValido)return this.$refs.nombre.validate(),this.$refs.apellido.validate(),this.$refs.email.validate(),this.$refs.password.validate(),void this.$refs.passwordAgain.validate();var e=this;this.password.valueOf()===this.passwordAgain.valueOf()?c.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(){var a=Object(k["a"])(regeneratorRuntime.mark((function a(i){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,c.a.auth().currentUser.sendEmailVerification().then((function(){console.log("Si verifico el email")})).catch((function(){console.log("No verifico el email")}));case 2:console.log(i),console.log("--\x3e"+c.a.auth().currentUser.uid),c.a.firestore().collection("Usuarios").doc(c.a.auth().currentUser.uid).set({apellido:t.apellido,nombre:t.nombre,email:t.email,password:t.password,primeraVez:!0,foto:null,tokens:[]},{merge:!0}).then((function(){console.log("Documento escrito con id : ",c.a.auth().currentUser.uid+" de "+e.email),c.a.auth().signInWithEmailAndPassword(e.email,e.password).then((function(t){console.log(t),e.$router.replace("home")}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message),console.log(i)}))})).catch((function(t){console.error("Error adding document: ",t)})),o=c.a.firestore(),o.collection("Usuarios").get().then((function(t){t.forEach((function(t){console.log(t.data().email)}))}));case 7:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),(function(t){alert("Opps "+t.message)})):alert("La contraseña repetida no coincide con la original. Revisa los datos introducidos.")}}},wt=yt,xt=Object(m["a"])(wt,ft,bt,!1,null,"42e25a5b",null),kt=xt.exports;h()(xt,{VBtn:U["a"],VForm:ot["a"],VImg:rt["a"],VTextField:st["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"RecuperarContraseña "},[a("div",{staticClass:"text-center justify-center"},[a("h3",[t._v("Recuperar contraseña")]),a("v-form",{staticStyle:{margin:"2px"},model:{value:t.esValido,callback:function(e){t.esValido=e},expression:"esValido"}},[a("v-text-field",{attrs:{label:"Escribe el email destino de la nueva contraseña",counter:"",outlined:"",clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-btn",{attrs:{disabled:!t.esValido,rounded:"",color:"primary"},on:{click:t.recuperar}},[t._v("Enviar")]),a("br"),a("br"),a("h3",[t._v("Volver a "),a("router-link",{staticStyle:{color:"blue"},attrs:{to:"/login"}},[t._v("Iniciar sesión")]),t._v(".")],1)],1)])},St=[],Ct={name:"RecuperarContraseña",data:function(){return{esValido:!1,email:"",contrasena:"",show3:!1}},methods:{recuperar:function(){var t=c.a.auth(),e=this.email;t.sendPasswordResetEmail(e).then((function(){alert("Contraseña nueva enviada al correo"),this.$router.replace("login")})).catch((function(t){alert("Opps "+t.message),console.log("Opps "+t.message)}))}}},Dt=Ct,At=Object(m["a"])(Dt,_t,St,!1,null,"54000572",null),jt=At.exports;h()(At,{VBtn:U["a"],VForm:ot["a"],VTextField:st["a"]});var Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"EditarPerfil ma-0 pa-0"},[a("barra-superior",{attrs:{titulo:t.titulo}}),a("v-row",{attrs:{"no-gutters":"",justify:"space-around"}},[t.datosListos?a("v-row",{attrs:{justify:"space-around"}},[a("v-col",{staticStyle:{align:"center",width:"auto","margin-top":"60px"}},[a("div",[a("h3",[t._v("Información personal")]),a("div",[t._v(" Nombre: "+t._s(t.usuario.nombre)),a("br"),t._v(" Apellido: "+t._s(t.usuario.apellido)),a("br"),t._v(" Correo electrónico: "+t._s(t.usuario.email)),a("br")])]),a("v-btn",{staticStyle:{background:"skyblue",margin:"10px",width:"auto"},attrs:{rounded:""},on:{click:t.funcionCambiarDatos}},[t._v("Editar información")]),a("br"),a("v-app",[a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({staticStyle:{background:"#FF5D5E",margin:"10px",width:"auto"},attrs:{dark:"",rounded:""}},i),[t._v("Borrar cuenta")])]}}],null,!1,3453530643),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-text",[t._v(" ¿Estás seguro de borrar la cuenta y todos los datos relaccionados?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"#FF5D5E"},attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancelar")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"skyblue"},attrs:{text:""},on:{click:t.funcionBorrarDatos}},[t._v("Si")])],1)],1)],1)],1)],1)],1)],1):t._e()],1)],1)},Vt=[],Pt={name:"EditarPerfil",components:{BarraSuperior:O},data:function(){return{titulo:"PERFIL",datosListos:!1,dialog:!1,drawer:!0,home:{title:"Home",icon:"mdi-home-city",clickFuncion:"funcionHome"},hogares:{title:"Hogares",icon:"mdi-home-city",clickFuncion:"funcionHogares"},dispositivos:{title:"Dispositivos",icon:"mdi-home-city",clickFuncion:"funcionDispositivos"},alertas:{title:"Alertas",icon:"mdi-home-city",clickFuncion:"funcionAlertas"},mini:!0,usuario:{email:null,password:null,apellido:null,nombre:"null",foto:null,db:l["firestore"]()}}},created:function(){var t=this,e=l["firestore"]();e.collection("Usuarios").doc(l["auth"]().currentUser.uid).get().then((function(e){t.usuario.nombre=e.data().nombre,t.usuario.email=e.data().email,t.usuario.apellido=e.data().apellido,t.usuario.email=e.data().email,t.usuario.password=e.data().password,t.usuario.foto=e.data().foto,console.log(t.usuario.foto)})).catch((function(t){console.log("Error getting document:",t)})),this.datosListos=!0},methods:{funcionCambiarDatos:function(){var t=this;console.log("funcion ir editar informacion"),l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){t.$router.replace("EditarInformacion"),console.log(e)}),(function(t){console.log("Opps "+t.message)}))},funcionBorrarDatos:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dialog=!1,t.next=3,l["auth"]().currentUser.uid;case 3:return e=t.sent,console.log("funcion borrar usuario "+e),l["firestore"]().collection("Alarmas").where("usuarioAsociado","==",e).get().then((function(t){t.forEach((function(t){l["firestore"]().collection("Alarmas").doc(t.data().idAlarma).delete(),console.log("Borrada notificacion")}))})),console.log("Paso al dipositivos"),t.next=9,l["firestore"]().collection("Dispositivos").where("usuarioAsociado","==",e).get().then((function(t){t.forEach((function(t){var e=l["firestore"]().batch(),a=0,i=this;l["firestore"]().collection("Dispositivos").doc(t.data().identificacion).collection("Historial").get().then((function(t){t.forEach((function(t){console.log("Borro-----------"+t.data().time),499==a&&(e.commit(),i.contador=0),a++;var o=t.ref;e.delete(o)})),e.commit()})),l["firestore"]().collection("Dispositivos").doc(t.data().identificacion).delete(),console.log("Borrada dispositivo")}))}));case 9:return console.log("Paso al hogares"),t.next=12,l["firestore"]().collection("Hogares").where("usuarioAsociado","==",e).get().then((function(t){t.forEach((function(t){l["firestore"]().collection("Hogares").doc(t.data().idHogar).delete(),console.log("Borrada hogar")}))}));case 12:return t.next=14,l["firestore"]().collection("Usuarios").doc(e).delete().then((function(){console.log("Usuario borrado")})).catch((function(t){console.error("Error removing document: ",t)}));case 14:return t.next=16,l["auth"]().currentUser.delete().then((function(){console.log("Usuario deregistrado")})).catch((function(t){console.error(t)}));case 16:this.$router.replace("login");case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Et=Pt,Mt=Object(m["a"])(Et,Ht,Vt,!1,null,"1069aa12",null),It=Mt.exports;h()(Mt,{VApp:g["a"],VBtn:U["a"],VCard:q["a"],VCardActions:W["a"],VCardText:W["c"],VCol:pt["a"],VContainer:V["a"],VDialog:$["a"],VRow:Y["a"],VSpacer:K["a"]});var Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"Hogares ma-0 pa-0",attrs:{fluid:""}},[a("barra-superior",{attrs:{titulo:t.titulo}}),!0===this.dataReady?a("v-row",{attrs:{"no-gutters":"",justify:"space-around"}},[a("v-col",[a("div",{staticClass:"gb_Qe",staticStyle:{visibility:"hidden",left:"8px",top:"56px"}}),a("v-col",{staticStyle:{"margin-bottom":"80px"}},[a("v-card-title",{staticClass:"headline justify-center"},[t._v("HOGARES")]),0==this.lista_hogares.length&&!0===this.dataReady?a("h4",{staticStyle:{"margin-top":"10%",background:"aquamarine"}},[!0===this.dataReady?a("div",[t._v(" No hay hogares registrados aún"),a("br"),a("h4",{staticStyle:{"font-weight":"bold"}},[t._v("Registra un hogar para poder asociar un sensor")])]):t._e()]):t._e(),t._l(t.lista_hogares,(function(e){return a("v-container",{key:e.id,staticStyle:{display:"inline-block",width:"100%","max-width":"400px"}},[a("v-row",{staticStyle:{width:"100%"},attrs:{dense:""}},[a("v-card",{staticStyle:{width:"100%","text-align":"left"},attrs:{raised:""}},[a("v-card-title",{staticClass:"headline",staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.apodo))]),null!=e.direccion?a("v-card-subtitle",[t._v(t._s(e.direccion))]):a("v-card-subtitle",{staticStyle:{"min-height":"38px"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{background:"skyblue",margin:"3px",width:"34%"},attrs:{dark:"",text:""},on:{click:function(a){return t.abrirDialogModificar(e)}}},[t._v(" Modificar ")]),a("v-btn",{staticStyle:{background:"skyblue",margin:"3px",width:"31%"},attrs:{dark:"",text:""},on:{click:function(a){return t.abrirDialogDetalles(e)}}},[t._v("Detalles ")]),a("v-btn",{staticStyle:{background:"#FF5D5E",margin:"3px",width:"30%"},attrs:{dark:"",text:""},on:{click:function(a){return t.abrirDialogBorrar(e)}}},[t._v("Borrar ")])],1)],1)],1)],1)})),a("v-btn",{attrs:{fixed:"",fab:"",right:"",bottom:"",color:"primary",dark:""},on:{click:function(e){return t.abrirDialogCrear(null)}}},[a("v-icon",[t._v("mdi-plus")])],1),a("v-dialog",{attrs:{"max-width":"600px",persistent:""},model:{value:t.dialogCrear,callback:function(e){t.dialogCrear=e},expression:"dialogCrear"}},[a("v-card",[null==t.opcion?a("v-card-title",{staticClass:"white--text",staticStyle:{background:"#05c5ff"}},[a("span",{staticClass:"headline"},[t._v("Nuevo Hogar ")])]):a("v-card-title",{staticClass:"text-center justify-center white--text",staticStyle:{background:"#05c5ff"}},[a("span",{staticClass:"headline"},[t._v("Modificar "+t._s(t.opcion.apodo))])]),a("v-card-text",[a("v-container",[a("v-form",{model:{value:t.datosValidos2,callback:function(e){t.datosValidos2=e},expression:"datosValidos2"}},[a("v-row",[a("v-divider"),null==t.opcion?a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Apodo o alias",hint:"Ej: 'Casa Abuelo' o 'Casa Playa'",rules:[t.rules.required]},model:{value:t.hogar.apodo,callback:function(e){t.$set(t.hogar,"apodo",e)},expression:"hogar.apodo"}})],1):a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Apodo",hint:"Ej: 'Casa Abuelo' o 'Casa Playa'",rules:[t.rules.required]},model:{value:t.hogarModificarApodo,callback:function(e){t.hogarModificarApodo=e},expression:"hogarModificarApodo"}})],1),a("v-divider"),a("v-col",{attrs:{cols:"12"}},[a("div",[a("div",[a("v-text-field",{ref:"autocomplete",attrs:{rules:[t.rules.required],type:"text"}}),a("br")],1),a("br"),a("gmap-map",{staticStyle:{width:"100%",height:"200px"},attrs:{center:t.center,zoom:12}},t._l(t.markers,(function(e,i){return a("gmap-marker",{key:i,attrs:{position:e.position},on:{click:function(a){t.center=e.position}}})})),1)],1)])],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{color:"white",background:"deepskyblue"},attrs:{text:""},on:{click:t.funcionClose}},[t._v("Cerrar ")]),null==t.opcion?a("v-btn",{staticStyle:{color:"white",background:"deepskyblue"},attrs:{disabled:!t.datosValidos2,text:""},on:{click:t.funcionSave}},[t._v("Guardar ")]):a("v-btn",{staticStyle:{color:"white",background:"deepskyblue"},attrs:{disabled:!t.datosValidos2,text:""},on:{click:t.funcionGuardarEdicion}},[t._v("Guardar ")])],1)],1)],1)],2)],1)],1):a("v-row",[a("v-layout",{staticStyle:{"margin-top":"60px"},attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogModificar,callback:function(e){t.dialogModificar=e},expression:"dialogModificar"}},[a("v-card",[a("v-card-title",{staticStyle:{background:"aqua"}},[a("span",{staticClass:"headline"},[t._v("Modificar "+t._s(t.hogarModificarApodo))])]),a("v-card-text",[a("v-container",[a("v-form",{model:{value:t.datosValidos,callback:function(e){t.datosValidos=e},expression:"datosValidos"}},[a("v-row",[a("v-divider"),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Apodo",hint:"Ej: 'Casa Abuelo' o 'Casa Playa'",rules:[t.rules.required]},model:{value:t.hogarModificarApodo,callback:function(e){t.hogarModificarApodo=e},expression:"hogarModificarApodo"}})],1),a("v-divider"),a("v-col",{attrs:{cols:"12"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{color:"white",background:"deepskyblue"},attrs:{text:""},on:{click:t.funcionClose}},[t._v("Cancelar ")]),a("v-btn",{staticStyle:{color:"white",background:"deepskyblue"},attrs:{text:"",disabled:!t.datosValidos},on:{click:t.funcionGuardarEdicion}},[t._v("Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialogDetalles,callback:function(e){t.dialogDetalles=e},expression:"dialogDetalles"}},[a("v-card",[null!=t.hogarDetalles?a("div",[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"skyblue"}},[a("span",{staticClass:"headline"},[t._v("Sensores asociados en "),a("br"),t._v(" "+t._s(t.hogarDetalles.apodo))])])],1):t._e(),t._l(t.lista_sensores_hogar,(function(e){return a("div",{key:e.id},[a("v-card",{staticStyle:{margin:"10px"}},[a("v-card-title",{staticClass:"headline",on:{click:function(a){return t.botonDetallesSensor(e)}}},[t._v(" "+t._s(e.apodo)+" (Id: "+t._s(e.identificacion)+") ")])],1)],1)})),t.lista_sensores_hogar.length>0?a("div"):a("div",[t._v(" No existen sensores asociados al hogar actualmente ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{color:"white",background:"#FF5D5E"},attrs:{text:""},on:{click:t.funcionClose}},[t._v("Cerrar ")])],1)],2)],1),a("v-dialog",{staticClass:"text-center justify-center",attrs:{persistent:"","max-width":"500px"},model:{value:t.dialogBorrar,callback:function(e){t.dialogBorrar=e},expression:"dialogBorrar"}},[a("v-card",[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"lightskyblue"}},[t._v(" ¿Estás seguro de borrar "),a("br"),t._v(t._s(t.hogarBorrarApodo)+"? ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"#FF5D5E"},on:{click:t.funcionClose}},[t._v(" Calcelar ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"skyblue"},on:{click:function(e){return t.botonBorrar(t.hogarBorrar)}}},[t._v(" Si ")])],1)],1)],1)},Tt=[],zt=a("755e"),Bt={name:"Hogares",components:{BarraSuperior:O},dialog:!1,data:function(){return{center:{lat:40.4297218,lng:-3.67975},markers:[],places:[],currentPlace:"",dataReady:!1,prueba:"",listenerIniciado:!1,listenerIniciado2:!1,opcion:null,hogarModificar:null,hogarModificarDireccion:null,hogarModificarApodo:null,hogarBorrar:null,hogarBorrarDireccion:null,hogarBorrarApodo:null,hogarApodoAntiguo:null,hogarDetalles:null,titulo:"Hogares",datosValidos:!1,datosValidos2:!1,rules:{required:function(t){return!!t||"Campo requerido."},min:function(t){return null!=t&&t.length>=9||"Numero invalido"},numero:function(t){var e=/^(\(?\+?[0-9]*\)?)?[0-9_\- ()]*$/;return e.test(t)||"Numero invalido"}},lista_sensores_hogar:[],drawer:!0,dialog:!1,dialogModificar:!1,dialogDetalles:!1,dialogCrear:!1,dialogBorrar:!1,home:{title:"Home",icon:"mdi-home-city",clickFuncion:"funcionHome"},hogares:{title:"Hogares",icon:"mdi-home-city",clickFuncion:"funcionHogares"},dispositivos:{title:"Dispositivos",icon:"mdi-home-city",clickFuncion:"funcionDispositivos"},alertas:{title:"Alertas",icon:"mdi-home-city",clickFuncion:"funcionAlertas"},mini:!0,hogar:{direccion:null,apodo:null,usuarioAsociado:null,db:l["firestore"]()},hogarEditar:{direccion:null,apodo:null},lista_hogares:null,usuario:{dato1:null,dato2:null,email:null,password:null,apellido:null,nombre:"null",foto:null,tokens:[],IdHogares:[],db:l["firestore"]()}}},computed:{google:zt["gmapApi"]},watch:{google:function(){var t=this;null!=this.google?console.log("No null"):console.log("Null"),console.log(this.$refs),null!=this.google&&this.$refs&&this.$refs&&(this.autocomplete=new this.google.maps.places.Autocomplete(this.$refs.autocomplete.$refs.input,{types:["geocode"]}),this.listenerIniciado||(t.autocomplete.addListener("place_changed",(function(){var e=t.autocomplete.getPlace();t.setPlace(e)})),this.listenerIniciado=!0))}},mounted:function(){this.geolocate()},created:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,i,o,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dataReady=!1,e=l["auth"]().currentUser.uid,i=l["firestore"](),o=this,t.next=6,i.collection("Usuarios").doc(e).get().then((function(t){o.usuario.nombre=t.data().nombre,o.usuario.email=t.data().email,o.usuario.apellido=t.data().apellido,o.usuario.email=t.data().email,o.usuario.password=t.data().password,o.usuario.foto=t.data().foto,o.usuario.tokens=t.data().tokens,o.usuario.IdHogares=t.data().IdHogares,console.log("Nombre: "+o.usuario.nombre)}));case 6:return r=a("7c3c"),s=r("SSS",new Date),console.log(s),t.next=11,i.collection("Hogares").where("usuarioAsociado","==",e).onSnapshot((function(t){o.lista_hogares=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data());o.lista_hogares.push(e)}))}));case 11:this.dataReady=!0;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{setPlace:function(t){this.currentPlace=t,this.addMarker()},addMarker:function(){if(this.currentPlace){this.places=[];var t={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:t}),this.places.push(this.currentPlace),this.center=t,this.currentPlace=null,console.log(this.places[0].formatted_address)}this.hogar.direccion=this.places[0].formatted_address,console.log("direccion tiene: "+this.hogar.direccion)},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude}}))},abrirDialogModificar:function(t){this.opcion=t,console.log("Abrir dialog modificar "+t),this.hogarModificar=t,this.hogarApodoAntiguo=t.apodo,this.hogarModificarDireccion=t.direccion,this.hogarModificarApodo=t.apodo,this.dialogCrear=!0,console.log(t.apodo)},abrirDialogCrear:function(t){this.opcion=t,console.log("Abrir dialog crear "+t),this.hogarModificar=t,this.hogarModificarDireccion=t,this.hogarModificarApodo=t,this.dialogCrear=!0,console.log(t)},abrirDialogDetalles:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.hogarDetalles=e,a=this,a.lista_sensores_hogar=[],console.log("hola 1 --\x3e"+this.lista_sensores_hogar),i=0;case 5:if(!(i<a.hogarDetalles.vectorSensores.length)){t.next=11;break}return t.next=8,l["firestore"]().collection("Dispositivos").doc(a.hogarDetalles.vectorSensores[i]).get().then((function(t){console.log(t.data()),a.lista_sensores_hogar.push(t.data()),console.log("hola 2 --\x3e"+a.lista_sensores_hogar)})).catch((function(t){console.error(t)}));case 8:i++,t.next=5;break;case 11:this.dialogDetalles=!0;case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),funcionClose:function(){console.log("close"),this.dialogCrear=!1,this.opcion=null,this.hogar.apodo=null,this.listenerIniciado=!1,this.dialog=!1,this.dialogModificar=!1,this.dialogBorrar=!1,this.currentPlace=null,this.dialogDetalles=!1,this.hogarModificarDireccion=null,this.hogarModificar=null,this.hogarModificarApodo=null;var t=l["auth"]().currentUser.uid,e=l["firestore"](),a=this;e.collection("Hogares").where("usuarioAsociado","==",t).onSnapshot((function(t){a.lista_hogares=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data());a.lista_hogares.push(e)}))}))},botonDetallesSensor:function(t){var e=this;console.log("pulsado boton detalles del sensor "+t.identificacion);var a=t.identificacion;l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(i){e.$router.push({name:"DetallesDispositivo",params:{idSensor:a,apodo:t.apodo,origen:"Dispositivos"}}),console.log(i)}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message)}))},funcionSave:function(){console.log("save"),this.dialogCrear=!1,this.opcion=null,this.dialog=!1,this.hogar.direccion=this.places[0].formatted_address,console.log("Guardo y hogar.direccion tiene: "+this.hogar.direccion);var t=l["firestore"]().collection("Hogares").doc();t.set({idHogar:t.id,direccion:this.hogar.direccion,apodo:this.hogar.apodo,usuarioAsociado:l["auth"]().currentUser.uid,vectorSensores:[]}),this.hogar.direccion=null,this.currentPlace=null,this.hogar.apodo=null},funcionGuardarEdicion:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,console.log("pulsado guardar edicion del hogar "+e.hogar.direccion),this.dialogModificar=!1,this.dialogCrear=!1,console.log("Nuevos valores en el hogar con id: "+e.hogarModificar.idHogar+". Direccion->"+e.hogar.direccion+"  apodo->"+e.hogarModificarApodo),t.next=7,l["firestore"]().collection("Hogares").doc(e.hogarModificar.idHogar).set({direccion:e.hogar.direccion,apodo:e.hogarModificarApodo},{merge:!0});case 7:return console.log("Nuevo: "+e.hogarModificarApodo),console.log("Viejo: "+e.opcion.apodo),t.next=11,l["firestore"]().collection("Dispositivos").where("hogarAsociado","==",e.opcion.apodo).where("usuarioAsociado","==",l["auth"]().currentUser.uid).get().then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.forEach(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Modifico sensor "+a.data().apodo+" con nuevo hogarAsociado: "+e.hogarModificarApodo),t.next=3,l["firestore"]().collection("Dispositivos").doc(a.data().identificacion).set({hogarAsociado:e.hogarModificarApodo},{merge:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log("Error getting documents: ",t)}));case 11:console.log("Termino modificación"),this.opcion=null;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),botonDetalles:function(t){console.log("Pulsado el boton detalles ");var e=this;this.lista_sensores_hogar=[],console.log("hola 1 --\x3e"+this.lista_sensores_hogar);for(var a=0;a<t.vectorSensores.length;a++)l["firestore"]().collection("Dispositivos").doc(t.vectorSensores[a]).get().then((function(t){console.log(t.data()),e.lista_sensores_hogar.push(t.data()),console.log("hola 2 --\x3e"+e.lista_sensores_hogar)})).catch((function(t){console.error(t)}))},abrirDialogBorrar:function(t){this.hogarBorrarDireccion=t.direccion,this.hogarBorrarApodo=t.apodo,this.hogarBorrar=t,console.log("Hogar = "+t),this.dialogBorrar=!0},botonBorrar:function(t){var e=t.id;this.dialogBorrar=!1,console.log("pulsado boton borrar el "+t.apodo+e);for(var a=0;a<t.vectorSensores.length;a++){var i=t.vectorSensores[a];console.log("idSensor = "+i),l["firestore"]().collection("Dispositivos").doc(i).delete()}l["firestore"]().collection("Hogares").doc(t.id).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(t){console.error("Error removing document: ",t)}))}}},Lt=Bt,Ot=Object(m["a"])(Lt,Rt,Tt,!1,null,"2e3cf164",null),Ft=Ot.exports;h()(Ot,{VBtn:U["a"],VCard:q["a"],VCardActions:W["a"],VCardSubtitle:W["b"],VCardText:W["c"],VCardTitle:W["d"],VCol:pt["a"],VContainer:V["a"],VDialog:$["a"],VDivider:Z["a"],VForm:ot["a"],VIcon:P["a"],VLayout:G["a"],VProgressCircular:J["a"],VRow:Y["a"],VSpacer:K["a"],VTextField:st["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"Dispositivos ma-0 pa-0",attrs:{fluid:""}},[a("barra-superior",{attrs:{titulo:t.titulo}}),a("v-overflow-btn",{staticClass:"mx-auto overflow-hidden ",staticStyle:{"margin-top":"65px","margin-left":"0px !important","margin-right":"0px !important","min-width":"100%",background:"azure"},attrs:{items:t.grupos_dispositivos,label:"Dispositivos de todos los hogares","hide-details":""},model:{value:t.hogar_mostrar,callback:function(e){t.hogar_mostrar=e},expression:"hogar_mostrar"}}),!0===this.dataReady?a("v-row",{attrs:{"no-gutters":"",justify:"space-around"}},[a("v-col",[a("div",{staticClass:"gb_Qe",staticStyle:{visibility:"hidden",left:"8px",top:"56px"}}),a("v-col",{staticStyle:{"margin-bottom":"80px"}},[0==this.lista_dispositivos.length?a("div",[a("h4",{staticStyle:{"margin-top":"10%",background:"aquamarine","margin-left":"auto","margin-right":"auto"}},[t._v(" No hay dispositivos registrados aún"),a("br"),a("h4",{staticStyle:{"font-weight":"bold"}},[t._v("Registra un sensor para poder monitorizarlo")]),a("h4",[t._v("Imp: Tiene que exitir una casa al que asociarlo")])])]):t._e(),t._l(t.listaAux,(function(e){return a("v-container",{key:e.id,staticStyle:{display:"inline-block",width:"100%","max-width":"400px"}},[a("v-row",{staticStyle:{"min-width":"100%",width:"auto"}},[a("v-card",{staticStyle:{margin:"auto","margin-left":"5px","margin-right":"5px",width:"auto","text-align":"left"},attrs:{raised:""}},[null==e.tempActual?a("v-card-title",{staticClass:"headline"},[t._v(" Cogiendo datos del sensor. Por favor espere. ")]):t._e(),"F"===e.formato&&null!=e.tempActual?a("v-card-title",{staticClass:"headline",staticStyle:{"padding-bottom":"1px!important","padding-top":"1px!important"}},[1==e.activadoSonidoTemperatura?a("v-icon",{on:{click:function(a){return t.cambioSonidoTemperatuta(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoTemperatura?a("v-icon",{on:{click:function(a){return t.cambioSonidoTemperatuta(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),1==e.disabledTemperatura?a("div",{staticStyle:{"margin-left":"5px"}},[e.tempActual>e.tempMax||e.tempActual<e.tempMin?a("div",[t._v(" Temperatura Actual: "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.tempActual)+" "+t._s(e.formato)+"º")])]):a("div",[t._v(" Temperatura Actual: "),a("span",{staticStyle:{color:"#42b983"}},[t._v(t._s(e.tempActual)+" "+t._s(e.formato)+"º")])])]):t._e()],1):t._e(),"F"===e.formato&&null!=e.tempActual?a("v-card-title",{staticClass:"headline",staticStyle:{"padding-bottom":"1px!important","padding-top":"1px!important","font-size":"50%"}},[1==e.activadoSonidoHumedad?a("v-icon",{on:{click:function(a){return t.cambioSonidoHumedad(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoHumedad?a("v-icon",{on:{click:function(a){return t.cambioSonidoHumedad(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),1==e.disabledHumedad?a("div",{staticStyle:{"margin-left":"5px"}},[e.humedadActual>e.humedadMax||e.humedadActual<e.humedadMin?a("div",[t._v(" Humedad: "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.humedadActual)+"%")])]):a("div",[t._v(" Humedad: "),a("span",{staticStyle:{color:"#42b983"}},[t._v(t._s(e.humedadActual)+"%")])])]):t._e()],1):t._e(),"F"===e.formato&&null!=e.tempActual?a("v-card-title",{staticClass:"headline",staticStyle:{"padding-bottom":"10px!important","padding-top":"1px!important"}},[1==e.disabledPolucion?a("div",[parseInt(50*e.polucionActual/15.4)>100&&parseInt(50*e.polucionActual/15.4)<150?a("div",[1==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),t._v(" Polución: "),a("span",{staticStyle:{color:"orange"}},[t._v(t._s(parseInt(50*e.polucionActual/15.4))),a("span",{staticStyle:{"font-size":"2vh"}},[a("span",{staticStyle:{"font-size":"1.5vh"}},[t._v("PM2.5 en µg/m³")])])]),a("v-icon",{on:{click:function(e){t.dialogInfo=!0}}},[t._v(" mdi-information-outline ")])],1):t._e(),parseInt(50*e.polucionActual/15.4)>150?a("div",[1==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),t._v(" Polución: "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(parseInt(50*e.polucionActual/15.4))),a("span",{staticStyle:{"font-size":"2vh"}},[a("span",{staticStyle:{"font-size":"1.5vh"}},[t._v("PM2.5 en µg/m³")])])]),a("v-icon",{on:{click:function(e){t.dialogInfo=!0}}},[t._v(" mdi-information-outline ")])],1):t._e(),parseInt(50*e.polucionActual/15.4)<100?a("div",[1==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),t._v(" Polución: "),a("span",{staticStyle:{color:"#42b983"}},[t._v(t._s(parseInt(50*e.polucionActual/15.4))),a("span",{staticStyle:{"font-size":"2vh"}},[a("span",{staticStyle:{"font-size":"1.5vh"}},[t._v("PM2.5 en µg/m³")])])]),a("v-icon",{on:{click:function(e){t.dialogInfo=!0}}},[t._v(" mdi-information-outline ")])],1):t._e()]):t._e()]):t._e(),"C"===e.formato&&null!=e.tempActual&&1==e.disabledTemperatura?a("v-card-title",{staticClass:"headline",staticStyle:{"padding-bottom":"1px!important","padding-top":"1px!important"}},[1==e.activadoSonidoTemperatura?a("v-icon",{on:{click:function(a){return t.cambioSonidoTemperatuta(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoTemperatura?a("v-icon",{on:{click:function(a){return t.cambioSonidoTemperatuta(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),1==e.disabledTemperatura?a("div",{staticStyle:{"margin-left":"4px"}},[parseInt(5*(e.tempActual-32)/9)>e.tempMax||parseInt(5*(e.tempActual-32)/9)<e.tempMin?a("div",[t._v(" Temperatura Actual: "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(parseInt(5*(e.tempActual-32)/9))+" "+t._s(e.formato)+"º")])]):a("div",[t._v(" Temperatura Actual: "),a("span",{staticStyle:{color:"#42b983"}},[t._v(t._s(parseInt(5*(e.tempActual-32)/9))+" "+t._s(e.formato)+"º")])])]):t._e()],1):t._e(),"C"===e.formato&&null!=e.tempActual&&1==e.disabledHumedad?a("v-card-title",{staticClass:"headline",staticStyle:{"padding-bottom":"1px!important","padding-top":"1px!important"}},[1==e.activadoSonidoHumedad?a("v-icon",{on:{click:function(a){return t.cambioSonidoHumedad(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoHumedad?a("v-icon",{on:{click:function(a){return t.cambioSonidoHumedad(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),e.humedadActual>e.humedadMax||e.humedadActual<e.humedadMin?a("div",{staticStyle:{"margin-left":"5px"}},[t._v(" Humedad: "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.humedadActual)+"%")])]):a("div",{staticStyle:{"margin-left":"5px"}},[t._v(" Humedad: "),a("span",{staticStyle:{color:"#42b983"}},[t._v(t._s(e.humedadActual)+"%")])])],1):t._e(),"C"===e.formato&&null!=e.tempActual?a("v-card-title",{staticClass:"headline",staticStyle:{"padding-top":"1px!important"}},[1==e.disabledPolucion?a("div",[parseInt(50*e.polucionActual/15.4)>100&&parseInt(50*e.polucionActual/15.4)<150?a("div",[1==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),t._v(" Polución: "),a("span",{staticStyle:{color:"orange"}},[t._v(t._s(parseInt(50*e.polucionActual/15.4))),a("span",{staticStyle:{"font-size":"2vh"}},[a("span",{staticStyle:{"font-size":"1.5vh"}},[t._v("PM2.5 en µg/m³")])])]),a("v-icon",{on:{click:function(e){t.dialogInfo=!0}}},[t._v(" mdi-information-outline ")])],1):t._e(),parseInt(50*e.polucionActual/15.4)>150?a("div",[1==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),t._v(" Polución: "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(parseInt(50*e.polucionActual/15.4))),a("span",{staticStyle:{"font-size":"2vh"}},[a("span",{staticStyle:{"font-size":"1.5vh"}},[t._v("PM2.5 en µg/m³")])])]),a("v-icon",{on:{click:function(e){t.dialogInfo=!0}}},[t._v(" mdi-information-outline ")])],1):t._e(),parseInt(50*e.polucionActual/15.4)<100?a("div",[1==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell ")]):t._e(),0==e.activadoSonidoPolucion&&1==e.disabledPolucion?a("v-icon",{on:{click:function(a){return t.cambioSonidoPolucion(e,t.mostrar_hogarAux)}}},[t._v(" mdi-bell-off ")]):t._e(),t._v(" Polución: "),a("span",{staticStyle:{color:"#42b983"}},[t._v(t._s(parseInt(50*e.polucionActual/15.4))),a("span",{staticStyle:{"font-size":"2vh"}},[a("span",{staticStyle:{"font-size":"1.5vh"}},[t._v("PM2.5 en µg/m³")])])]),a("v-icon",{on:{click:function(e){t.dialogInfo=!0}}},[t._v(" mdi-information-outline ")])],1):t._e()]):t._e()]):t._e(),a("v-card-subtitle",{staticStyle:{"padding-top":"12px"}},[t._v(t._s(e.apodo)+", "+t._s(e.hogarAsociado)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{background:"skyblue",margin:"3px",width:"33%"},attrs:{dark:"",text:""},on:{click:function(a){return t.openModificar(e)}}},[t._v(" Modificar ")]),a("v-btn",{staticStyle:{background:"skyblue",margin:"3px",width:"31%"},attrs:{dark:"",text:""},on:{click:function(a){return t.botonDetalles(e)}}},[t._v(" Detalles ")]),a("v-btn",{staticStyle:{background:"#FF5D5E",margin:"3px",width:"31%"},attrs:{dark:"",text:""},on:{click:function(a){return t.abrirDialogBorrar(e)}}},[t._v(" Borrar ")])],1)],1)],1)],1)})),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{fixed:"",fab:"",right:"",bottom:"",color:"primary",dark:"",disabled:!t.existeHogar}},i),[a("v-icon",[t._v("mdi-plus")])],1)]}}],null,!1,2108043187),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"white--text",staticStyle:{background:"#05c5ff"}},[a("span",{staticClass:"headline"},[t._v("Nuevo sensor")])]),a("v-card-text",[a("v-container",[a("v-form",{model:{value:t.datosValidos,callback:function(e){t.datosValidos=e},expression:"datosValidos"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:[t.rules.required,t.rules.minId],label:"Numero de identificación",hint:"Campo de 4 numeros minimo"},model:{value:t.dispositivo.identificacion,callback:function(e){t.$set(t.dispositivo,"identificacion",e)},expression:"dispositivo.identificacion"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{rules:[t.rules.required],label:"Inserte un nombre para identificarlo"},model:{value:t.dispositivo.apodo,callback:function(e){t.$set(t.dispositivo,"apodo",e)},expression:"dispositivo.apodo"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{rules:[t.rules.required],items:t.hogaresRegistrados,label:"Asocialo a un hogar"},model:{value:t.hogar,callback:function(e){t.hogar=e},expression:"hogar"}})],1)],1)],1),a("br"),a("v-divider"),a("v-row",{staticClass:"text-center justify-center"},[a("v-col",{attrs:{cols:"12"}},[a("v-switch",{staticClass:"ma-2",attrs:{disabled:!1,label:"Temperatura"},model:{value:t.disabled,callback:function(e){t.disabled=e},expression:"disabled"}})],1),a("div",{staticClass:"text-center justify-center"},[a("v-col",{staticClass:"text-center justify-center",attrs:{cols:"12"}},[a("v-radio-group",{attrs:{rules:[t.rules.required],disabled:!t.disabled,row:""},model:{value:t.row,callback:function(e){t.row=e},expression:"row"}},[a("v-radio",{attrs:{label:"Celsius",value:"C"}}),a("v-radio",{attrs:{label:"Fahrenheit",value:"F"}})],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h4",[t._v("Rango temperatura segura (sin notificaciones): "+t._s(t.sliderData.range[0])+"º"+t._s(t.row)+"-"+t._s(t.sliderData.range[1])+"º"+t._s(t.row))]),a("v-range-slider",{staticClass:"align-center",attrs:{max:t.sliderData.max,min:t.sliderData.min,disabled:!t.disabled,"hide-details":""},model:{value:t.sliderData.range,callback:function(e){t.$set(t.sliderData,"range",e)},expression:"sliderData.range"}})],1)],1),a("v-divider"),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-switch",{staticClass:"ma-2",attrs:{disabled:!1,label:"Humedad"},model:{value:t.disabledHumedad,callback:function(e){t.disabledHumedad=e},expression:"disabledHumedad"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h4",[t._v("Rango humedad relativa segura (sin notificaciones): "+t._s(t.sliderDataHumedad.range[0])+"%-"+t._s(t.sliderDataHumedad.range[1])+"%")]),a("v-range-slider",{staticClass:"align-center",attrs:{max:t.sliderDataHumedad.max,min:t.sliderDataHumedad.min,disabled:!t.disabledHumedad,"hide-details":""},model:{value:t.sliderDataHumedad.range,callback:function(e){t.$set(t.sliderDataHumedad,"range",e)},expression:"sliderDataHumedad.range"}})],1)],1)],1),a("v-divider"),a("v-row",[a("v-col",[a("v-switch",{staticClass:"ma-2",attrs:{disabled:!1,label:"Polución"},model:{value:t.disabledPolucion,callback:function(e){t.disabledPolucion=e},expression:"disabledPolucion"}}),1==t.disabledPolucion?a("div",[t._v(" Esta opcion te termitira monitorizar el nivel de polución en un ambiente, de tal forma que los valores que se calculen en el ambiente no sean peligrosos ni pongan en riego a las personas. "),1==t.informacion?a("v-row",{staticClass:"text-center justify-center"},[a("v-spacer"),a("v-img",{staticStyle:{"max-width":"300px","max-height":"250px"},attrs:{src:"/img/icons/ValoresPolucion.png"}}),a("v-spacer")],1):t._e()],1):t._e()],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{background:"skyblue"},attrs:{color:"white ",text:""},on:{click:t.funcionClose}},[t._v("Cerrar ")]),a("v-btn",{staticStyle:{background:"skyblue"},attrs:{disabled:!t.datosValidos,color:"white ",text:""},on:{click:t.funcionSave}},[t._v(" Guardar ")])],1)],1)],1)],2)],1)],1):a("v-row",[a("v-layout",{staticStyle:{"margin-top":"60px"},attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1)],1),a("v-dialog",{attrs:{"max-width":"600px",persistent:""},model:{value:t.dialogModificar,callback:function(e){t.dialogModificar=e},expression:"dialogModificar"}},[a("v-card",[null!=t.sensorDetalles?a("div",{staticClass:"text-center justify-center"},[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"aqua"}},[a("span",{staticClass:"headline"},[t._v("Editar Sensor"),a("br"),t._v(" "+t._s(t.sensorDetalles.apodo)+" ("+t._s(t.sensorDetalles.identificacion)+") ")])])],1):t._e(),a("v-card-text",[a("v-container",[a("v-form",{model:{value:t.datosValidos,callback:function(e){t.datosValidos=e},expression:"datosValidos"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-switch",{staticClass:"ma-2",attrs:{disabled:!1,label:"Temperatura"},model:{value:t.disabledEditar,callback:function(e){t.disabledEditar=e},expression:"disabledEditar"}})],1),a("div",{staticClass:"text-center justify-center"},[a("v-col",{staticClass:"text-center justify-center",attrs:{cols:"12"}},[a("v-radio-group",{attrs:{rules:[t.rules.required],disabled:!t.disabledEditar,row:""},model:{value:t.row,callback:function(e){t.row=e},expression:"row"}},[a("v-radio",{attrs:{label:"Celsius",value:"C"}}),a("v-radio",{attrs:{label:"Fahrenheit",value:"F"}})],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h4",[t._v("Rango temperatura segura (sin notificaciones): "+t._s(t.sliderData.range[0])+"º"+t._s(t.row)+"-"+t._s(t.sliderData.range[1])+"º"+t._s(t.row))]),a("v-range-slider",{staticClass:"align-center",attrs:{max:t.sliderData.max,min:t.sliderData.min,disabled:!t.disabledEditar,"hide-details":""},model:{value:t.sliderData.range,callback:function(e){t.$set(t.sliderData,"range",e)},expression:"sliderData.range"}})],1)],1),a("v-divider"),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-switch",{staticClass:"ma-2",attrs:{disabled:!1,label:"Humedad"},model:{value:t.disabledHumedad,callback:function(e){t.disabledHumedad=e},expression:"disabledHumedad"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h4",[t._v("Rango humedad relativa segura (sin notificaciones): "+t._s(t.sliderDataHumedad.range[0])+"%-"+t._s(t.sliderDataHumedad.range[1])+"%")]),a("v-range-slider",{staticClass:"align-center",attrs:{max:t.sliderDataHumedad.max,min:t.sliderDataHumedad.min,disabled:!t.disabledHumedad,"hide-details":""},model:{value:t.sliderDataHumedad.range,callback:function(e){t.$set(t.sliderDataHumedad,"range",e)},expression:"sliderDataHumedad.range"}})],1)],1)],1),a("v-divider"),a("v-row",[a("v-col",[a("v-switch",{staticClass:"ma-2",attrs:{disabled:!1,label:"Polución"},model:{value:t.disabledPolucion,callback:function(e){t.disabledPolucion=e},expression:"disabledPolucion"}}),1==t.disabledPolucion?a("div",[t._v(" Esta opcion te termitira monitorizar el nivel de polución en un ambiente, de tal forma que los valores que se calculen en el ambiente no sean peligrosos ni pongan en riego a las personas, calculada por la mezcla de sustancias químicas orgánicas, polvo, hollín y metales. "),1==t.informacion?a("v-row",{staticClass:"text-center justify-center"},[a("v-spacer"),a("v-img",{staticStyle:{"max-width":"300px","max-height":"250px"},attrs:{src:"/img/icons/ValoresPolucion.png"}}),a("v-spacer")],1):t._e()],1):t._e()],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{background:"skyblue"},attrs:{color:"white ",text:""},on:{click:t.funcionCloseModificar}},[t._v("Cancelar ")]),a("v-btn",{staticStyle:{background:"skyblue"},attrs:{color:"white ",text:"",disabled:!t.datosValidos},on:{click:function(e){return t.funcionGuardarEdicion(t.sensorDetalles)}}},[t._v("Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialogBorrar,callback:function(e){t.dialogBorrar=e},expression:"dialogBorrar"}},[a("v-card",[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"lightskyblue"}},[t._v(" ¿Estás seguro de borrar "),a("br"),t._v(t._s(t.dispositivoBorrarApodo)+"? ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"#FF5D5E"},on:{click:t.funcionClose}},[t._v(" Calcelar ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"skyblue"},on:{click:function(e){return t.botonBorrar(t.dispositivoBorrar)}}},[t._v(" Si ")])],1)],1),a("v-dialog",{staticClass:"text-center justify-center",staticStyle:{margin:"2px"},attrs:{"max-width":"500px"},model:{value:t.dialogInfo,callback:function(e){t.dialogInfo=e},expression:"dialogInfo"}},[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"lightskyblue","margin-bottom":"2px"}},[t._v(" Rangos de polución ")]),a("v-img",{attrs:{src:"/img/icons/ValoresPolucion.png"}})],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogSilenciarTemperatura,callback:function(e){t.dialogSilenciarTemperatura=e},expression:"dialogSilenciarTemperatura"}},[a("v-card",{staticClass:"text-center justify-center"},[a("v-card-text",{staticClass:"text-center justify-center"},[a("p",[a("b",[t._v("Las notificaciones de temperatura han sido silenciadas en el sensor "+t._s(t.dispositivoEditado))])])])],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogSonorizarTemperatura,callback:function(e){t.dialogSonorizarTemperatura=e},expression:"dialogSonorizarTemperatura"}},[a("v-card",{staticClass:"text-center justify-center"},[a("v-card-text",{staticClass:"text-center justify-center"},[a("p",[a("b",[t._v("Las notificaciones de temperatura han sido activadas en el sensor "+t._s(t.dispositivoEditado))])])])],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogSilenciarHumedad,callback:function(e){t.dialogSilenciarHumedad=e},expression:"dialogSilenciarHumedad"}},[a("v-card",{staticClass:"text-center justify-center"},[a("v-card-text",{staticClass:"text-center justify-center"},[a("p",[a("b",[t._v("Las notificaciones de humedad han sido silenciadas en el sensor "+t._s(t.dispositivoEditado))])])])],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogSonorizarHumedad,callback:function(e){t.dialogSonorizarHumedad=e},expression:"dialogSonorizarHumedad"}},[a("v-card",{staticClass:"text-center justify-center"},[a("v-card-text",{staticClass:"text-center justify-center"},[a("p",[a("b",[t._v("Las notificaciones de humedad han sido activadas en el sensor "+t._s(t.dispositivoEditado))])])])],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogSilenciarPolucion,callback:function(e){t.dialogSilenciarPolucion=e},expression:"dialogSilenciarPolucion"}},[a("v-card",{staticClass:"text-center justify-center"},[a("v-card-text",{staticClass:"text-center justify-center"},[a("p",[a("b",[t._v("Las notificaciones de polución han sido silenciadas en el sensor "+t._s(t.dispositivoEditado))])])])],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogSonorizarPolucion,callback:function(e){t.dialogSonorizarPolucion=e},expression:"dialogSonorizarPolucion"}},[a("v-card",[a("v-card-text",{staticClass:"text-center justify-center"},[a("p",[a("b",[t._v("Las notificaciones de polución han sido activadas en el sensor "+t._s(t.dispositivoEditado))])])])],1)],1)],1)},Ut=[],qt={name:"Dispositivos",components:{BarraSuperior:O},data:function(){var t=this;return{grupos_dispositivos:[],hogar_mostrar:"Dispositivos de todos los hogares",dataReady:!1,dialogInfo:!1,sliderData:{min:0,max:150,slider:40,range:[30,70]},sliderDataHumedad:{min:0,max:100,slider:40,range:[20,80]},dialogSilenciarTemperatura:!1,dialogSilenciarHumedad:!1,dialogSilenciarPolucion:!1,dialogSonorizarTemperatura:!1,dialogSonorizarHumedad:!1,dialogSonorizarPolucion:!1,dispositivoEditado:null,combinacionTemperatura:!1,mostrar_hogar:null,mostrar_hogarAux:null,auxMostrar:null,combinacionHumedad:!1,idSensorDetalles:null,dialogModificar:!1,dialogBorrar:!1,existeHogar:!1,sensorDetalles:null,datosValidos:!1,titulo:"Dispositivos",radioGroup:1,row:"C",drawer:!0,dialog:!1,disabled:!1,disabledHumedad:!1,disabledEditar:!1,disabledPolucion:!1,dispositivoBorrarId:null,dispositivoBorrarApodo:null,dispositivoBorrarHogar:null,dispositivoBorrar:null,min:0,max:80,minHumedad:0,maxHumedad:50,rules:{required:function(t){return!!t||"Campo requerido."},minId:function(t){return t.length>=4||"EL ID tiene que ser de 5 digitos"},valorMax:function(e){return e>t.min||"EL valor máximo no es válido"},valorMin:function(e){return e<t.max||"EL valor mínimo no es válido"},temperaturaValida:function(){return 1==t.combinacionTemperatura||"Los valores han de ser validos"},humedadValida:function(){return 1==t.combinacionHumedad||"Los valores han de ser validos"}},home:{title:"Home",icon:"mdi-home-city",clickFuncion:"funcionHome"},hogares:{title:"Hogares",icon:"mdi-home-city",clickFuncion:"funcionHogares"},dispositivos:{title:"Dispositivos",icon:"mdi-home-city",clickFuncion:"funcionDispositivos"},alertas:{title:"Alertas",icon:"mdi-home-city",clickFuncion:"funcionAlertas"},slider:40,range:[0,80],hogar:null,dispositivo:{identificacion:null,apodo:null},informacion:!0,mini:!0,minUsu:null,maxUsu:null,lista_dispositivos:null,listaAux:[],hogaresRegistrados:[],hogaresRegistradosID:[],usuario:{email:null,password:null,apellido:null,nombre:"null",foto:null,db:l["firestore"]()}}},created:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dataReady=!1,e=l["auth"]().currentUser.uid,a=l["firestore"](),i=this,t.next=6,a.collection("Usuarios").doc(e).get().then((function(t){i.usuario.nombre=t.data().nombre,i.usuario.email=t.data().email,i.usuario.apellido=t.data().apellido,i.usuario.password=t.data().password,i.usuario.foto=t.data().foto}));case 6:return console.log("Usuario: "+e),t.next=9,a.collection("Dispositivos").where("usuarioAsociado","==",e).onSnapshot((function(t){i.lista_dispositivos=[],i.listaAux=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data());i.lista_dispositivos.push(e),i.hogar_mostrar!=e.hogarAsociado&&"Dispositivos de todos los hogares"!=i.hogar_mostrar||i.listaAux.push(e)}))}));case 9:return t.next=11,a.collection("Hogares").where("usuarioAsociado","==",e).onSnapshot((function(t){t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data());i.hogaresRegistrados.push(e.apodo),i.grupos_dispositivos.push(e.apodo),i.hogaresRegistradosID.push(e),i.existeHogar=!0}))}));case 11:i.grupos_dispositivos.push("Dispositivos de todos los hogares"),console.log("Dispositivos del usuario "+i.usuario.email),this.dataReady=!0;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{hogar_mostrar:function(t){if(console.log(t),"Dispositivos de todos los hogares"!=t){console.log("Muetsro los de "+t),this.mostrar_hogarAux=t;var e=this;this.listaAux=[];for(var a=0;a<this.lista_dispositivos.length;a++)e.lista_dispositivos[a].hogarAsociado==t&&e.listaAux.push(e.lista_dispositivos[a])}else console.log("Todos"),this.mostrar_hogarAux=t,this.listaAux=[],this.listaAux=this.lista_dispositivos},min:function(t){t<this.max?(this.combinacionTemperatura=!0,this.$refs.max.validate()):this.combinacionTemperatura=!1},max:function(t){t>this.min?(this.combinacionTemperatura=!0,this.$refs.min.validate()):this.combinacionTemperatura=!1},minHumedad:function(t){t<this.maxHumedad?(this.combinacionHumedad=!0,this.$ref.maxHumedad.validate()):this.combinacionHumedad=!1},maxHumedad:function(t){t>this.minHumedad?(this.combinacionHumedad=!0,this.$ref.minHumedad().validate()):this.combinacionHumedad=!1}},methods:{funcionGuardarEdicion:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e){var a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("pulsado guardar edicion del sensor "+e.identificacion+e.apodo),this.dialogModificar=!1,console.log("Nuevos valores: "+this.disabledEditar+this.disabledHumedad+this.disabledPolucion+this.min+this.max),console.log("hay que actualizar"),a=null,i=null,o=null,parseFloat(this.sliderData.range[1])<parseFloat(e.tempActual)?(i=(new Date).getTime(),console.log("el sensor "+e.apodo+" SI coge modificar como ultima en temepratura Max")):parseFloat(this.sliderData.range[0])>parseFloat(e.tempActual)?(i=(new Date).getTime(),console.log("el sensor "+e.apodo+" SI coge modificar como ultima en temepratura Min")):(i=0,console.log("el sensor "+e.apodo+" NO coge modificar como ultima en temepratura")),parseFloat(this.sliderDataHumedad.range[1])<parseFloat(e.humedadActual)?(a=(new Date).getTime(),console.log("el sensor "+e.apodo+" SI coge modificar como ultima en humedad Max")):parseFloat(this.sliderDataHumedad.range[0])>parseFloat(e.humedadActual)?(a=(new Date).getTime(),console.log("el sensor "+e.apodo+" SI coge modificar como ultima en humedad Min")):(a=0,console.log("el sensor "+e.apodo+" NO coge modificar como ultima en humedad")),100<parseFloat(e.polucionActual)?(o=(new Date).getTime(),console.log("el sensor "+e.apodo+" SI coge modificar como ultima en polucion")):(o=0,console.log("el sensor "+e.apodo+" NO coge modificar como ultima en polucion")),t.next=12,l["firestore"]().collection("Dispositivos").doc(e.identificacion).set({formato:this.row,ultimaNotiH:a,ultimaNotiT:i,ultimaNotiP:o,poderNotiH:!0,poderNotiP:!0,poderNotiT:!0,tempMax:this.sliderData.range[1],tempMin:this.sliderData.range[0],humedadMax:this.sliderDataHumedad.range[1],humedadMin:this.sliderDataHumedad.range[0],disabledHumedad:this.disabledHumedad,disabledTemperatura:this.disabledEditar,disabledPolucion:this.disabledPolucion},{merge:!0});case 12:this.max=this.min=0,this.dispositivo.identificacion=this.dispositivo.identificacion=this.hogar=null,this.disabled=this.disabledTemperatura=this.disabledHumedad=this.disabledPolucion=!1;case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),funcionClose:function(){this.dialog=!1,this.dialogBorrar=!1,this.dispositivo.identificacion=this.dispositivo.apodo=this.hogar=null,this.disabled=this.disabledTemperatura=this.disabledHumedad=this.disabledPolucion=!1,this.dispositivo.identificacion=null,this.dispositivo.apodo=null,this.hogar=null,this.disabled=!1,this.disabledHumedad=!1,this.disabledPolucion=!1,this.sliderData.range[0]=30,this.sliderData.range[1]=70,this.sliderDataHumedad.range[0]=20,this.sliderDataHumedad.range[1]=80},funcionCloseModificar:function(){console.log("close"),this.dialogModificar=!1,this.dispositivo.identificacion=this.dispositivo.identificacion=this.hogar=null,this.disabled=this.disabledTemperatura=this.disabledHumedad=this.disabledPolucion=!1},openModificar:function(t){this.dialogModificar=!0,this.sensorDetalles=t},funcionSave:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a,i,o,r,s,c,d=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("save"),this.dialog=!1,e=l["firestore"](),a={},i=this.dispositivo.identificacion,o=null,r=null,s=null,c="https://www.purpleair.com/json?show="+this.dispositivo.identificacion,n.a.get(c).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!=n.data.results[0]&&(o=n.data.results[0].temp_f.toString(),r=n.data.results[0].humidity.toString(),s=n.data.results[0].p_2_5_um.toString()),null!=o){t.next=5;break}alert("El ID del sensor no está registrado"),t.next=30;break;case 5:return console.log("paso"),console.log("Hogar--\x3e '"+d.hogar+"' IdSensor --\x3e "+i),t.next=9,e.collection("Hogares").where("apodo","==",d.hogar).where("usuarioAsociado","==",l["auth"]().currentUser.uid).get().then((function(t){t.forEach((function(t){var o=t.data().idHogar;a=t.data().vectorSensores,a.push(i),console.log(t.data().apodo+" 0:"+o),console.log(t.data().apodo+" 1:"+a),e.collection("Hogares").doc(o).set({vectorSensores:a},{merge:!0})}))}));case 9:if("F"!=d.row){t.next=14;break}return t.next=12,l["firestore"]().collection("Dispositivos").doc(d.dispositivo.identificacion).set({identificacion:d.dispositivo.identificacion,apodo:d.dispositivo.apodo,usuarioAsociado:l["auth"]().currentUser.uid,hogarAsociado:d.hogar,activadaTemperatura:d.disabled,formato:d.row,tempMax:d.sliderData.range[1],tempMin:d.sliderData.range[0],tempActual:null},{merge:!0});case 12:t.next=16;break;case 14:return t.next=16,l["firestore"]().collection("Dispositivos").doc(d.dispositivo.identificacion).set({identificacion:d.dispositivo.identificacion,apodo:d.dispositivo.apodo,activadaTemperatura:d.disabled,usuarioAsociado:l["auth"]().currentUser.uid,hogarAsociado:d.hogar,formato:d.row,tempActual:null,tempMax:d.sliderData.range[1],tempMin:d.sliderData.range[0]},{merge:!0});case 16:return t.next=18,l["firestore"]().collection("Dispositivos").doc(d.dispositivo.identificacion).set({tempActual:o,humedadActual:r,polucionActual:s,estado:!0,humedadMax:d.sliderDataHumedad.range[1],humedadMin:d.sliderDataHumedad.range[0],disabledHumedad:d.disabledHumedad,activadoSonidoTemperatura:!0,activadoSonidoHumedad:!0,activadoSonidoPolucion:!0,disabledTemperatura:d.disabled,disabledPolucion:d.disabledPolucion,ultimaNotiT:0,ultimaNotiH:0,ultimaNotiP:0,poderNotiT:!0,poderNotiH:!0,poderNotiP:!0},{merge:!0});case 18:return t.next=20,l["firestore"]().collection("Dispositivos").doc(d.dispositivo.identificacion).collection("Historial").add({time:new Date,humedad:r,polucion:s,temperatura:o});case 20:d.dispositivo.identificacion=null,d.dispositivo.apodo=null,d.hogar=null,d.disabled=!1,d.disabledHumedad=!1,d.disabledPolucion=!1,d.sliderData.range[0]=30,d.sliderData.range[1]=70,d.sliderDataHumedad.range[0]=20,d.sliderDataHumedad.range[1]=80;case 30:return t.abrupt("return",n);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),botonDetalles:function(t){var e=this;console.log("pulsado boton detalles "+t),this.idSensorDetalles=t.identificacion;var a=t.identificacion;l["auth"]().signInWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(i){e.$router.push({name:"DetallesDispositivo",params:{idSensor:a,apodo:t.apodo,origen:"Dispositivos"}}),console.log(i)}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message)}))},botonBorrar:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e){var a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("pulsado boton borrar el "+e.identificacion),this.dialogBorrar=!1,t.next=4,l["firestore"]().collection("Hogares").where("apodo","==",e.hogarAsociado).where("usuarioAsociado","==",l["auth"]().currentUser.uid).get().then((function(t){t.forEach(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=a.data().vectorSensores,o=0;case 2:if(!(o<i.length)){t.next=12;break}if(i[o]!=e.identificacion){t.next=9;break}return i.splice(o,1),console.log("entro "+a.data().vectorSensores),console.log(i),t.next=9,l["firestore"]().collection("Hogares").doc(a.id).set({vectorSensores:i},{merge:!0});case 9:o++,t.next=2;break;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 4:return a=l["firestore"]().batch(),i=0,o=this,t.next=9,l["firestore"]().collection("Dispositivos").doc(e.identificacion).collection("Historial").get().then(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.forEach((function(t){console.log("Borro-----------"+t.data().time),499==i&&(a.commit(),o.contador=0),i++;var e=t.ref;a.delete(e)})),t.next=3,a.commit();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:return t.next=11,l["firestore"]().collection("Dispositivos").doc(e.identificacion).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(t){console.error("Error removing document: ",t)}));case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cambioSonidoTemperatuta:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dispositivoEditado=e.apodo,e.activadoSonidoTemperatura=!e.activadoSonidoTemperatura,0==e.activadoSonidoTemperatura?this.dialogSilenciarTemperatura=!0:this.dialogSonorizarTemperatura=!0,t.next=5,l["firestore"]().collection("Dispositivos").doc(e.identificacion).set({activadoSonidoTemperatura:e.activadoSonidoTemperatura},{merge:!0});case 5:console.log(a);case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),cambioSonidoHumedad:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dispositivoEditado=e.apodo,e.activadoSonidoHumedad=!e.activadoSonidoHumedad,0==e.activadoSonidoHumedad?this.dialogSilenciarHumedad=!0:this.dialogSonorizarHumedad=!0,t.next=5,l["firestore"]().collection("Dispositivos").doc(e.identificacion).set({activadoSonidoHumedad:e.activadoSonidoHumedad},{merge:!0});case 5:console.log(a);case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),cambioSonidoPolucion:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dispositivoEditado=e.apodo,e.activadoSonidoPolucion=!e.activadoSonidoPolucion,0==e.activadoSonidoPolucion?this.dialogSilenciarPolucion=!0:this.dialogSonorizarPolucion=!0,t.next=5,l["firestore"]().collection("Dispositivos").doc(e.identificacion).set({activadoSonidoPolucion:e.activadoSonidoPolucion},{merge:!0});case 5:console.log(a);case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),abrirDialogBorrar:function(t){this.dispositivoBorrarId=t.identificacion,this.dispositivoBorrarApodo=t.apodo,this.dispositivoBorrarHogar=t.hogarAsociado,this.dispositivoBorrar=t,console.log("dispositivo = "+t),this.dialogBorrar=!0}}},Wt=qt,$t=a("de8e"),Zt=a("67b6"),Gt=a("43a6"),Jt=a("5963"),Yt=a("b974"),Kt=a("b73d"),Qt=Object(m["a"])(Wt,Nt,Ut,!1,null,"7507ab2d",null),Xt=Qt.exports;h()(Qt,{VBtn:U["a"],VCard:q["a"],VCardActions:W["a"],VCardSubtitle:W["b"],VCardText:W["c"],VCardTitle:W["d"],VCol:pt["a"],VContainer:V["a"],VDialog:$["a"],VDivider:Z["a"],VForm:ot["a"],VIcon:P["a"],VImg:rt["a"],VLayout:G["a"],VOverflowBtn:$t["a"],VProgressCircular:J["a"],VRadio:Zt["a"],VRadioGroup:Gt["a"],VRangeSlider:Jt["a"],VRow:Y["a"],VSelect:Yt["a"],VSpacer:K["a"],VSwitch:Kt["a"],VTextField:st["a"]});var te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"Alertas  ma-0 pa-0 text-center justify-center",attrs:{fluid:""}},[a("barra-superior",{attrs:{titulo:t.titulo}}),!0===t.dataReady?a("v-row",{staticClass:"text-center justify-center",attrs:{"no-gutters":"",justify:"space-around"}},[a("v-col",{staticClass:"text-center justify-center"},[a("div",{staticClass:"text-center justify-center",staticStyle:{visibility:"hidden",left:"8px",top:"56px",display:"none"}}),a("v-col",{staticStyle:{"margin-bottom":"80px"}},[a("v-card-title",{staticClass:"headline justify-center"},[t._v("ALERTAS")]),t._l(t.lista_alertas.slice(0,20),(function(e){return a("v-container",{key:e.id,staticClass:" text-center justify-center",attrs:{fluid:""}},[a("v-row",{staticStyle:{width:"auto"},attrs:{dense:""}},[a("v-card",{staticStyle:{margin:"auto",width:"100%","text-align":"left","max-width":"600px"},attrs:{raised:""}},["%"===e.formato?a("div",[a("v-card-title",{staticClass:"headline",staticStyle:{"font-weight":"bold"}},[a("v-icon",{attrs:{color:"orange"}},[t._v(" mdi-water-outline ")]),t._v(" "+t._s(parseInt(e.tempActual))+t._s(e.formato)+" de humedad ")],1)],1):"C"===e.formato||"F"===e.formato?a("div",[a("v-card-title",{staticClass:"headline",staticStyle:{"font-weight":"bold"}},[a("v-icon",{attrs:{color:"orange"}},[t._v(" mdi-thermometer-alert ")]),t._v(" "+t._s(parseInt(e.tempActual))+"º"+t._s(e.formato)+" de temperatura ")],1)],1):a("div",[a("v-card-title",{staticClass:"headline",staticStyle:{"font-weight":"bold"}},[a("v-icon",{attrs:{color:"orange"}},[t._v(" mdi-cloud-alert ")]),t._v(" "+t._s(parseInt(e.tempActual))+" "+t._s(e.formato)+" ")],1)],1),a("v-card-subtitle",[t._v(t._s(e.mensaje))]),a("v-card-text",[t._v(t._s(new Date(e.time).getHours())+":"+t._s(new Date(e.time).getMinutes())+", "+t._s(new Date(e.time).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{background:"#FF5D5E"},attrs:{text:""},on:{click:function(a){return t.botonBorrarAbrirDialog(e)}}},[t._v(" Borrar ")])],1)],1)],1)],1)})),a("v-btn",{attrs:{fixed:"",fab:"",right:"",bottom:"",color:"primary",dark:"",disabled:!t.existenAlertas},on:{click:t.borrarAlarmasAbrirDialog}},[a("v-icon",[t._v("mdi-delete")])],1),0==t.lista_alertas.length?a("h4",{staticClass:"text-center justify-center",staticStyle:{"margin-top":"10%",background:"aquamarine"}},[t._v(" Sin resgitros"),a("br"),a("h4",{staticStyle:{"font-weight":"bold"}},[t._v("No se ha detectado ningun valor peligroso")])]):t._e()],2)],1)],1):a("v-row",[a("v-layout",{staticStyle:{"margin-top":"60px"},attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialogBorrarUna,callback:function(e){t.dialogBorrarUna=e},expression:"dialogBorrarUna"}},[a("v-card",[null!=this.dispositivoBorrar?a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"lightskyblue",width:"auto"}},[t._v(" ¿Estás seguro de borrar la "),a("br"),t._v("notificación de "+t._s(this.dispositivoBorrar.apodo)+"? ")]):t._e(),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"#FF5D5E"},on:{click:t.funcionClose}},[t._v(" Calcelar ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"skyblue"},on:{click:function(e){return t.botonBorrar(t.dispositivoBorrar)}}},[t._v(" Si ")])],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialogBorrarTodas,callback:function(e){t.dialogBorrarTodas=e},expression:"dialogBorrarTodas"}},[a("v-card",[a("v-card-title",{staticClass:"text-center justify-center",staticStyle:{background:"lightskyblue"}},[t._v(" ¿Estás seguro de borrar todas las notificaciones? ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"#FF5D5E"},on:{click:t.funcionClose}},[t._v(" Calcelar ")]),a("v-btn",{staticStyle:{margin:"2%",width:"45%",background:"skyblue"},on:{click:function(e){return t.borrarAlarmas()}}},[t._v(" Si ")])],1)],1)],1)},ee=[],ae={name:"Alertas",components:{BarraSuperior:O},data:function(){return{titulo:"Notificaciones",existenAlertas:null,tiempo:null,lista_alertas:null,dataReady:null,rules:{required:function(t){return!!t||"Campo requerido."}},usuario:{dato1:null,dato2:null,email:null,password:null,apellido:null,nombre:"null",foto:null,tokens:[],IdHogares:[],db:l["firestore"]()},dialogBorrarUna:!1,dialogBorrarTodas:!1,dispositivoBorrar:null}},created:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dataReady=!1,e=l["auth"]().currentUser.uid,a=l["firestore"](),i=this,t.next=6,a.collection("Usuarios").doc(e).get().then((function(t){i.usuario.nombre=t.data().nombre,i.usuario.email=t.data().email,i.usuario.apellido=t.data().apellido,i.usuario.email=t.data().email,i.usuario.password=t.data().password,i.usuario.foto=t.data().foto,i.usuario.tokens=t.data().tokens,i.usuario.IdHogares=t.data().IdHogares,console.log("Nombre: "+i.usuario.nombre)}));case 6:return console.log("UsuarioId = "+e,i.usuario.email),t.next=9,a.collection("Alarmas").where("usuarioAsociado","==",e).onSnapshot((function(t){i.lista_alertas=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data()),a=new Date(1e3*e.time.seconds);a.toLocaleString("es-ES"),e.time=a.toString(),i.lista_alertas.push(e),i.existenAlertas=!0})),i.lista_alertas.sort((function(t,e){return t.timeOrdenar>e.timeOrdenar?-1:t.timeOrdenar<e.timeOrdenar?1:0}))}));case 9:console.log("Alarmas del usuario "+i.usuario.email),this.dataReady=!0;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{botonBorrarAbrirDialog:function(t){this.dispositivoBorrar=t,console.log("alarma "+t.apodo),this.dialogBorrarUna=!0},borrarAlarmasAbrirDialog:function(){this.dialogBorrarTodas=!0},funcionClose:function(){this.dialogBorrarTodas=!1,this.dialogBorrarUna=!1},botonBorrar:function(t){var e=t.id;console.log("pulsado boton borrar el "+t.mensaje+" de id = "+e),l["firestore"]().collection("Alarmas").doc(e).delete().then((function(){console.log("Document successfully deleted!"),console.log("Document successfully deleted!")})).catch((function(t){console.error("Error removing document: ",t)})),this.dialogBorrarTodas=null,this.dialogBorrarUna=null},borrarAlarmas:function(){var t=l["auth"]().currentUser.uid;l["firestore"]().collection("Alarmas").where("usuarioAsociado","==",t).get().then((function(t){t.forEach((function(t){l["firestore"]().collection("Alarmas").doc(t.data().idAlarma).delete()}))})),this.dialogBorrarTodas=!1,this.dialogBorrarUna=!1}}},ie=ae,oe=Object(m["a"])(ie,te,ee,!1,null,"3964416e",null),re=oe.exports;h()(oe,{VBtn:U["a"],VCard:q["a"],VCardActions:W["a"],VCardSubtitle:W["b"],VCardText:W["c"],VCardTitle:W["d"],VCol:pt["a"],VContainer:V["a"],VDialog:$["a"],VIcon:P["a"],VLayout:G["a"],VProgressCircular:J["a"],VRow:Y["a"],VSpacer:K["a"]});var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"DetallesDispositivo ma-0 pa-0 ",attrs:{fluid:""}},[a("barra-superior",{attrs:{titulo:t.apodo}}),null!=this.horaCreated&&null!=this.horaDatos?a("div",{staticStyle:{"margin-top":"56px",background:"lightskyblue",color:"white"}},[a("v-divider"),parseFloat(this.horaDatos)-parseFloat(this.horaCreated)>=0?a("div",[a("v-icon",{staticStyle:{color:"#C0F357"},attrs:{large:""}},[t._v(" mdi-wifi ")]),t._v(" El sistema está actualmente activo. Última actualización: "+t._s(new Date(1e3*this.dispositivo.time.seconds).getHours())+":"+t._s(new Date(1e3*this.dispositivo.time.seconds).getMinutes())+" , "+t._s(t.day)+" ")],1):a("div",[a("v-icon",{staticStyle:{color:"#FF5D5E"},attrs:{large:""}},[t._v(" mdi-wifi-off ")]),t._v(" El sistema está actualmente inactivo. Última actualización: "+t._s(new Date(1e3*this.dispositivo.time.seconds).getHours())+":"+t._s(new Date(1e3*this.dispositivo.time.seconds).getMinutes())+" , "+t._s(t.day)+" ")],1),a("v-divider")],1):t._e(),a("v-row",{staticClass:"text-center justify-center;",staticStyle:{"margin-top":"10px","align-items":"center","align-content":"center"}},[a("v-radio-group",{staticStyle:{"margin-left":"auto"},model:{value:t.tipo,callback:function(e){t.tipo=e},expression:"tipo"}},[a("v-radio",{attrs:{label:"Temperatura",value:"T"}}),a("v-radio",{attrs:{label:"Humedad",value:"H"}}),a("v-radio",{attrs:{label:"Polucion",value:"P"}})],1),a("v-radio-group",{staticStyle:{"margin-right":"auto"},model:{value:t.tiempo,callback:function(e){t.tiempo=e},expression:"tiempo"}},[a("v-radio",{attrs:{label:"Últimas 6 horas",value:"H"}}),a("v-radio",{attrs:{label:"Último día",value:"D"}}),a("v-radio",{attrs:{label:"Última semana",value:"S"}})],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"H"===t.tiempo&&"T"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='H' && tipo==='T' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCard"}},["C"==t.dispositivo.formato?a("div",{staticStyle:{background:"lightskyblue"}},[a("v-card-title",{staticStyle:{"font-size":"22px"},attrs:{"primary-title":""}},[a("p",[t._v("Temperatura en las últimas 6 horas.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(parseInt(5*(this.dispositivo.tempActual-32)/9))+"ºC ")])])])],1):a("div",{staticStyle:{background:"lightskyblue"}},[a("v-card-title",{staticStyle:{"font-size":"22px"},attrs:{"primary-title":""}},[a("p",[t._v("Temperatura en las últimas 6 horas.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.tempActual)+"ºF ")])])])],1),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDay&&void 0!=t.myChartDay,expression:"myChartDay !=null && myChartDay !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDay",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDay.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"H"===t.tiempo&&"H"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='H' && tipo==='H' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCardH"}},[a("v-card-title",{staticStyle:{"font-size":"22px",background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Humedad en las últimas 6 horas.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.humedadActual)+"% ")])])]),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDayH&&void 0!=t.myChartDayH,expression:"myChartDayH !=null && myChartDayH !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDayH",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDayH.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"H"===t.tiempo&&"P"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='H' && tipo==='P' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCardP"}},[a("v-card-title",{staticStyle:{"font-size":"22px",background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Polución en las últimas 6 horas.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.polucionActual)+" PM2.5 en µg/m³ ")])]),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDayP&&void 0!=t.myChartDayP,expression:"myChartDayP !=null && myChartDayP !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDayP",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDayP.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"D"===t.tiempo&&"T"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='D' && tipo==='T' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCard24hT"}},["C"==t.dispositivo.formato?a("div",{staticStyle:{background:"lightskyblue"}},[a("v-card-title",{staticStyle:{"font-size":"22px"},attrs:{"primary-title":""}},[a("p",[t._v("Temperatura en el último día.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(parseInt(5*(this.dispositivo.tempActual-32)/9))+"ºC ")])])],1):a("div",{staticStyle:{background:"lightskyblue"}},[a("v-card-title",{staticStyle:{"font-size":"22px"},attrs:{"primary-title":""}},[a("p",[t._v("Temperatura en el último día.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.tempActual)+"ºF ")])])],1),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDay24hT&&void 0!=t.myChartDay24hT,expression:"myChartDay24hT !=null && myChartDay24hT !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDay24hT",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDay24hT.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"D"===t.tiempo&&"H"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='D' && tipo==='H' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCard24hH"}},[a("v-card-title",{staticStyle:{background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Humedad en el último día.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.humedadActual)+"% ")])]),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDay24hH&&void 0!=t.myChartDay24hH,expression:"myChartDay24hH !=null && myChartDay24hH !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDay24hH",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDay24hH.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"D"===t.tiempo&&"P"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='D' && tipo==='P' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCard24hP"}},[a("v-card-title",{staticStyle:{background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Polución en el último día.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.polucionActual)+" PM2.5 en µg/m³ ")])]),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDay24hP&&void 0!=t.myChartDay24hP,expression:"myChartDay24hP !=null && myChartDay24hP !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDay24hP",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDay24hP.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"S"===t.tiempo&&"T"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='S' && tipo==='T' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCardWeekT"}},["C"==t.dispositivo.formato?a("div",{staticStyle:{background:"lightskyblue"}},[a("v-card-title",{staticStyle:{background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Temperatura en la última semana.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(parseInt(5*(this.dispositivo.tempActual-32)/9))+"ºC ")])])],1):a("div",{staticStyle:{background:"lightskyblue"}},[a("v-card-title",{staticStyle:{"font-size":"22px"},attrs:{"primary-title":""}},[a("p",[t._v("Temperatura en la última semana.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.tempActual)+"ºF ")])])],1),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDayWeekT&&void 0!=t.myChartDayWeekT,expression:"myChartDayWeekT !=null && myChartDayWeekT !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDayWeekT",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDayWeekT.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"S"===t.tiempo&&"H"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='S' && tipo==='H' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCardWeekH"}},[a("v-card-title",{staticStyle:{background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Humedad en la última semana.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.humedadActual)+"% ")])]),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDayWeekH&&void 0!=t.myChartDayWeekH,expression:"myChartDayWeekH !=null && myChartDayWeekH !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDayWeekH",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDayWeekH.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:"S"===t.tiempo&&"P"===t.tipo&&!1===this.loadingActivations&&null!=this.dispositivo,expression:"tiempo==='S' && tipo==='P' && this.loadingActivations ===false && this.dispositivo != null"}],staticClass:"text-center justify-center",staticStyle:{"margin-top":"16px","margin-bottom":"76px"}},[a("v-container",{staticClass:"pa-3",staticStyle:{width:"96vw",height:"72vh","margin-bottom":"10px!important"},attrs:{id:"chartDayCardWeekP"}},[a("v-card-title",{staticStyle:{background:"lightskyblue"},attrs:{"primary-title":""}},[a("p",[t._v("Polución en la última semana.")]),a("div",{staticStyle:{color:"blue","text-align":"right"}},[t._v(" Actual: "+t._s(this.dispositivo.polucionActual)+" PM2.5 en µg/m³ ")])]),a("v-card-text",{staticClass:"v-icon",staticStyle:{"font-size":"inherit","justify-content":"inherit"}},[a("v-icon",[t._v("mdi-calendar-range")]),t._v(" "+t._s(t.day)+" ")],1),!1===this.dataReady?a("v-container",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"blue",size:"250"}})],1):t._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=t.myChartDayWeekP&&void 0!=t.myChartDayWeekP,expression:"myChartDayWeekP !=null && myChartDayWeekP !=undefined"}],staticStyle:{position:"relative"},attrs:{id:"chartDayWeekP",width:"100%",height:"100%"}}),a("div",{staticStyle:{"padding-top":"20px"}},[t.loadingActivations?t._e():a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.myChartDayWeekP.resetZoom()}}},[t._v(" Reset zoom ")])],1)],1)],1)],1)},ne=[],le=(a("fb6a"),a("30ef")),ce=a.n(le),de=(a("f634"),{name:"DetallesDispositivo",components:{BarraSuperior:O},props:{idSensor:{type:[String],required:!0,default:void 0},apodo:{type:[String],required:!0,default:void 0},origen:{type:[String],required:!0,default:void 0}},data:function(){return{tipo:null,tiempo:null,numAlertasDay:[],dispositivo:null,horaCreated:null,dataReady:!1,horaDatos:null,minutosDatos:null,historial:[],activaciones:[],myChartDay:null,myChartDayH:null,myChartDayP:null,myChartDay24hT:null,myChartDay24hH:null,myChartDay24hP:null,myCharDayWeekT:null,myCharDayWeekH:null,myCharDayWeekP:null,myChart24h:null,myChartSemana:null,loadingActivations:!0,usuario:{dato1:null,dato2:null,email:null,password:null,apellido:null,nombre:"null",foto:null,db:l["firestore"]()}}},created:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l["firestore"](),a=l["auth"]().currentUser.uid,this.horaCreated=(new Date).getHours(),i=this,this.tipo="T",this.tiempo="D",t.next=8,e.collection("Usuarios").doc(a).get().then((function(t){i.usuario.nombre=t.data().nombre,i.usuario.email=t.data().email,i.usuario.apellido=t.data().apellido,i.usuario.password=t.data().password,i.usuario.foto=t.data().foto,console.log("Nombre: "+i.usuario.nombre),console.log("Idsensor ="+i.idSensor),void 0==i.idSensor&&(console.log("na macho que no tiene valor asi que vuelvo a dispositivos"),l["auth"]().signInWithEmailAndPassword(i.usuario.email,i.usuario.password).then((function(t){i.$router.replace("Dispositivos"),console.log(t)}),(function(t){alert("Error: "+t.message),console.log("Opps "+t.message)})))}));case 8:return t.next=10,e.collection("Dispositivos").doc(this.idSensor).get().then((function(t){t.exists&&(console.log("Document data:",t.data()),i.dispositivo=t.data(),void 0!=i.dispositivo&&i.dispositivo),console.log(i.dispositivo)})).catch((function(t){console.log("Error getting document:",t)}));case 10:return t.next=12,e.collection("Dispositivos").doc(this.idSensor).collection("Historial").onSnapshot((function(t){i.historial=[],t.forEach((function(t){var e=Object(x["a"])({id:t.id},t.data()),a=new Date(1e3*e.time.seconds);a.toLocaleString("es-ES"),e.time=a.toString(),i.historial.push(e)})),i.historial.sort((function(t,e){return new Date(t.time)>new Date(e.time)?-1:new Date(t.time)<new Date(e.time)?1:0}));for(var e=0;e<i.historial.length;e++);i.activaciones=[5]}));case 12:this.loadingActivations=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{tiempo:function(){this.generarGrafica()},tipo:function(){this.generarGrafica()},activaciones:function(){this.loadingActivations||null==this.dispositivo||this.generarGrafica()}},computed:{day:function(){var t=new Date;return t.toLocaleDateString("es",{weekday:"long"}).charAt(0).toUpperCase()+t.toLocaleDateString("es",{weekday:"long"}).slice(1)+" "+t.getDate()+" de "+t.toLocaleDateString("es",{month:"long"})+" de "+t.getFullYear()},week:function(){var t=new Date;t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},year:function(){var t=new Date;return t.getFullYear()}},methods:{generarGrafica:function(){if(null==this.dispositivo)return null;console.log("--\x3e"),console.log(this.dispositivo);for(var t=0,e=[],a=this,i=null,o=null,r=[],s=0;s<180&&s<a.historial.length;s++)"C"==a.dispositivo.formato?r.push(5*(parseInt(a.historial[s].temperatura)-32)/9):r.push(parseInt(a.historial[s].temperatura)),i=new Date(a.historial[s].time).getMinutes(),o=new Date(a.historial[s].time).getHours(),e[t]=o+":"+i,t++;this.horaDatos=(new Date).getHours(),this.minutosDatos=(new Date).getMinutes(),r.reverse();for(var n=[],l=[],c=0;c<r.length;c++)n[c]=this.dispositivo.tempMax,l[c]=this.dispositivo.tempMin;e.reverse();var d=document.getElementById("chartDay").getContext("2d"),u=document.getElementById("chartDay"),m=document.getElementById("chartDayCard");u.style.width="94%",u.style.height="94%",u.width=m.offsetWidth,u.height=.8*m.offsetHeight-60,this.myChartDay=new ce.a(d,{type:"line",data:{labels:e,datasets:[{label:"Temperatura",lineTension:.2,borderWidth:1,showLine:!0,data:r,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:n,label:"Maximo:"+this.dispositivo.tempMax,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:l,label:"Minimo:"+this.dispositivo.tempMin,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{suggestedMax:this.dispositivo.tempMax,suggestedMin:this.dispositivo.tempMin}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var p=0,h=[],g=null,v=null,f=[],b=0;b<180&&b<a.historial.length;b++)f.push(parseInt(a.historial[b].humedad)),g=new Date(a.historial[b].time).getMinutes(),v=new Date(a.historial[b].time).getHours(),h[p]=v+":"+g,p++;f.reverse();for(var y=[],w=[],x=0;x<f.length;x++)y[x]=this.dispositivo.humedadMax,w[x]=this.dispositivo.humedadMin;h.reverse();var k=document.getElementById("chartDayH").getContext("2d"),_=document.getElementById("chartDayH"),S=document.getElementById("chartDayCardH");_.style.width="94%",_.style.height="94%",_.width=S.offsetWidth,_.height=.8*S.offsetHeight-60,this.myChartDayH=new ce.a(k,{type:"line",data:{labels:h,datasets:[{label:"Humedad",lineTension:.2,borderWidth:1,showLine:!0,data:f,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:y,label:"Maximo:",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:w,label:"Minimo:",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,maxTicksLimit:20,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{beginAtZero:!0,suggestedMax:100}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var C=0,D=[],A=null,j=null,H=[],V=0;V<180&&V<a.historial.length;V++)H.push(50*parseInt(a.historial[V].polucion)/15.4),A=new Date(a.historial[V].time).getMinutes(),j=new Date(a.historial[V].time).getHours(),D[C]=j+":"+A,C++;H.reverse();for(var P=[],E=[],M=0;M<H.length;M++)P[M]=150,E[M]=100;D.reverse();var I=document.getElementById("chartDayP").getContext("2d"),R=document.getElementById("chartDayP"),T=document.getElementById("chartDayCardP");R.style.width="94%",R.style.height="94%",R.width=T.offsetWidth,R.height=.8*T.offsetHeight-60,this.myChartDayP=new ce.a(I,{type:"line",data:{labels:D,datasets:[{label:"Polución",lineTension:.2,borderWidth:1,showLine:!0,data:H,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:P,label:"Nivel muy peligroso:150",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:E,label:"Nivel peligroso:100",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,maxTicksLimit:20,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{beginAtZero:!0,suggestedMax:160}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var z=0,B=[],L=null,O=null,F=[],N=0;N<720&&N<a.historial.length;N+=1)"C"==a.dispositivo.formato?F.push(5*(parseInt(a.historial[N].temperatura)-32)/9):F.push(parseInt(a.historial[N].temperatura)),L=new Date(a.historial[N].time).getMinutes(),O=new Date(a.historial[N].time).getHours(),B[z]=O+":"+L,z++;F.reverse();for(var U=[],q=[],W=0;W<F.length;W++)U[W]=this.dispositivo.tempMax,q[W]=this.dispositivo.tempMin;B.reverse();var $=document.getElementById("chartDay24hT").getContext("2d"),Z=document.getElementById("chartDay24hT"),G=document.getElementById("chartDayCard24hT");Z.style.width="94%",Z.style.height="94%",Z.width=G.offsetWidth,Z.height=.8*G.offsetHeight-60,this.myChartDay24hT=new ce.a($,{type:"line",data:{labels:B,datasets:[{label:"Temperatura",lineTension:.2,borderWidth:1,showLine:!0,data:F,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:U,label:"Maximo:"+this.dispositivo.tempMax,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:q,label:"Minimo:"+this.dispositivo.tempMin,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{suggestedMax:this.dispositivo.tempMax,suggestedMin:this.dispositivo.tempMin}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var J=0,Y=[],K=null,Q=null,X=[],tt=0;tt<720&&tt<a.historial.length;tt+=1)X.push(parseInt(a.historial[tt].humedad)),K=new Date(a.historial[tt].time).getMinutes(),Q=new Date(a.historial[tt].time).getHours(),Y[J]=Q+":"+K,J++;X.reverse();for(var et=[],at=[],it=0;it<X.length;it++)et[it]=this.dispositivo.humedadMax,at[it]=this.dispositivo.humedadMin;Y.reverse();var ot=document.getElementById("chartDay24hH").getContext("2d"),rt=document.getElementById("chartDay24hH"),st=document.getElementById("chartDayCard24hH");rt.style.width="94%",rt.style.height="94%",rt.width=st.offsetWidth,rt.height=.8*st.offsetHeight-60,this.myChartDay24hH=new ce.a(ot,{type:"line",data:{labels:Y,datasets:[{label:"Humedad",lineTension:.2,borderWidth:1,showLine:!0,data:X,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:et,label:"Maximo:"+this.dispositivo.humedadMax,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:at,label:"Minimo:"+this.dispositivo.humedadMin,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{beginAtZero:!0,suggestedMax:100}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var nt=0,lt=[],ct=null,dt=null,ut=[],mt=0;mt<720&&mt<a.historial.length;mt+=1)ut.push(50*parseInt(a.historial[mt].polucion)/15.4),ct=new Date(a.historial[mt].time).getMinutes(),dt=new Date(a.historial[mt].time).getHours(),lt[nt]=dt+":"+ct,nt++;ut.reverse();for(var pt=[],ht=[],gt=0;gt<ut.length;gt++)pt[gt]=150,ht[gt]=100;lt.reverse();var vt=document.getElementById("chartDay24hP").getContext("2d"),ft=document.getElementById("chartDay24hP"),bt=document.getElementById("chartDayCard24hP");ft.style.width="94%",ft.style.height="94%",ft.width=bt.offsetWidth,ft.height=.8*bt.offsetHeight-60,this.myChartDay24hP=new ce.a(vt,{type:"line",data:{labels:lt,datasets:[{label:"Polución",lineTension:.2,borderWidth:1,showLine:!0,data:ut,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:pt,label:"Limite peligroso",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:ht,label:"Limite ligeramente peligroso",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{beginAtZero:!0}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var yt=0,wt=[],xt=null,kt=null,_t=null,St=[],Ct=0;Ct<5040&&Ct<a.historial.length;Ct+=1)"C"==a.dispositivo.formato?St.push(5*(parseInt(a.historial[Ct].temperatura)-32)/9):St.push(parseInt(a.historial[Ct].temperatura)),xt=new Date(a.historial[Ct].time).getMinutes(),kt=new Date(a.historial[Ct].time).getHours(),_t=new Date(a.historial[Ct].time).getDay(),1==_t&&(_t="Lunes"),2==_t&&(_t="Martes"),3==_t&&(_t="Miercoles"),4==_t&&(_t="Jueves"),5==_t&&(_t="Viernes"),6==_t&&(_t="Sabado"),0==_t&&(_t="Domingo"),wt[yt]=kt+":"+xt+"("+_t+")",yt++;St.reverse();for(var Dt=[],At=[],jt=0;jt<St.length;jt++)Dt[jt]=this.dispositivo.tempMax,At[jt]=this.dispositivo.tempMin;wt.reverse();var Ht=document.getElementById("chartDayWeekT").getContext("2d"),Vt=document.getElementById("chartDayWeekT"),Pt=document.getElementById("chartDayCardWeekT");Vt.style.width="94%",Vt.style.height="94%",Vt.width=Pt.offsetWidth,Vt.height=.8*Pt.offsetHeight-60,this.myChartDayWeekT=new ce.a(Ht,{type:"line",data:{labels:wt,datasets:[{label:"Temperatura",lineTension:.2,borderWidth:1,showLine:!0,data:St,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:Dt,label:"Maximo:"+this.dispositivo.tempMax,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:At,label:"Minimo:"+this.dispositivo.tempMin,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,maxTicksLimit:14,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{suggestedMax:this.dispositivo.tempMax,suggestedMin:this.dispositivo.tempMin}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var Et=0,Mt=[],It=null,Rt=null,Tt=null,zt=[],Bt=0;Bt<5040&&Bt<a.historial.length;Bt+=1)zt.push(parseInt(a.historial[Bt].humedad)),It=new Date(a.historial[Bt].time).getMinutes(),Rt=new Date(a.historial[Bt].time).getHours(),Tt=new Date(a.historial[Bt].time).getDay(),1==Tt&&(Tt="Lunes"),2==Tt&&(Tt="Martes"),3==Tt&&(Tt="Miercoles"),4==Tt&&(Tt="Jueves"),5==Tt&&(Tt="Viernes"),6==Tt&&(Tt="Sabado"),0==Tt&&(Tt="Domingo"),Mt[Et]=Rt+":"+It+"("+Tt+")",Et++;zt.reverse();for(var Lt=[],Ot=[],Ft=0;Ft<zt.length;Ft++)Lt[Ft]=this.dispositivo.humedadMax,Ot[Ft]=this.dispositivo.humedadMin;Mt.reverse();var Nt=document.getElementById("chartDayWeekH").getContext("2d"),Ut=document.getElementById("chartDayWeekH"),qt=document.getElementById("chartDayCardWeekH");Ut.style.width="94%",Ut.style.height="94%",Ut.width=qt.offsetWidth,Ut.height=.8*qt.offsetHeight-60,this.myChartDayWeekH=new ce.a(Nt,{type:"line",data:{labels:Mt,datasets:[{label:"Humedad",lineTension:.2,borderWidth:1,showLine:!0,data:zt,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:Lt,label:"Maximo:"+this.dispositivo.humedadMax,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:Ot,label:"Minimo:"+this.dispositivo.humedadMin,fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,maxTicksLimit:14,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{beginAtZero:!0,suggestedMax:100}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}});for(var Wt=0,$t=[],Zt=null,Gt=null,Jt=null,Yt=[],Kt=0;Kt<5040&&Kt<a.historial.length;Kt+=1)Yt.push(50*parseInt(a.historial[Kt].polucion)/15.4),Zt=new Date(a.historial[Kt].time).getMinutes(),Gt=new Date(a.historial[Kt].time).getHours(),Jt=new Date(a.historial[Kt].time).getDay(),1==Jt&&(Jt="Lunes"),2==Jt&&(Jt="Martes"),3==Jt&&(Jt="Miercoles"),4==Jt&&(Jt="Jueves"),5==Jt&&(Jt="Viernes"),6==Jt&&(Jt="Sabado"),0==Jt&&(Jt="Domingo"),$t[Wt]=Gt+":"+Zt+"("+Jt+")",Wt++;Yt.reverse();for(var Qt=[],Xt=[],te=0;te<Yt.length;te++)Qt[te]=150,Xt[te]=100;$t.reverse();var ee=document.getElementById("chartDayWeekP").getContext("2d"),ae=document.getElementById("chartDayWeekP"),ie=document.getElementById("chartDayCardWeekP");ae.style.width="94%",ae.style.height="94%",ae.width=ie.offsetWidth,ae.height=.8*ie.offsetHeight-60,this.myChartDayWeekP=new ce.a(ee,{type:"line",data:{labels:$t,datasets:[{label:"Polucion",lineTension:.2,borderWidth:1,showLine:!0,data:Yt,backgroundColor:"rgba(25,118,210,0.5)",borderColor:"rgba(25,118,210, 1)",pointRadius:0},{data:Qt,label:"Nivel altamente peligroso",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(252, 0, 0, 1)",borderColor:"rgba(252, 0, 0, 1)",pointRadius:0},{data:Xt,label:"Nivel ligeramente peligroso",fill:!1,lineTension:.2,borderWidth:1,showLine:!0,backgroundColor:"rgba(81, 255, 0, 1)",borderColor:"rgba(81, 255, 0, 1)",pointRadius:0}]},options:{scales:{xAxes:[{stacked:!0,display:!0,precision:0,scaleLabel:{display:!1,labelString:"Hora"},ticks:{beginAtZero:!0,maxTicksLimit:14,autoSkip:!0}}],yAxes:[{stacked:!1,display:!0,scaleLabel:{display:!1,labelString:"Número"},ticks:{beginAtZero:!0,suggestedMax:170}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:.5},zoom:{enabled:!0,mode:"x"}}}}}),console.log("YA esta data listo"),this.dataReady=!0}}}),ue=de,me=Object(m["a"])(ue,se,ne,!1,null,"14e09414",null),pe=me.exports;h()(me,{VBtn:U["a"],VCardText:W["c"],VCardTitle:W["d"],VContainer:V["a"],VDivider:Z["a"],VIcon:P["a"],VProgressCircular:J["a"],VRadio:Zt["a"],VRadioGroup:Gt["a"],VRow:Y["a"]}),i["a"].use(b["a"]);var he=new b["a"]({routes:[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:lt},{path:"/sign-up",name:"SignUp",component:kt},{path:"/RecuperarContraseña",name:"RecuperarContraseña",component:jt},{path:"/EditarPerfil",name:"EditarPerfil",component:It,meta:{requiresAuth:!0}},{path:"/Dispositivos",name:"Dispositivos",component:Xt,meta:{requiresAuth:!0}},{path:"/DetallesDispositivo",name:"DetallesDispositivo",props:!0,component:pe,meta:{requiresAuth:!0}},{path:"/EditarInformacion",name:"EditarInformacion",component:vt,meta:{requiresAuth:!0}},{path:"/Hogares",name:"Hogares",component:Ft,meta:{requiresAuth:!0}},{path:"/Alertas",name:"Alertas",component:re,meta:{requiresAuth:!0}},{path:"/home",name:"Home",component:X,meta:{requiresAuth:!0}}]});he.beforeEach((function(t,e,a){var i=c.a.auth().currentUser,o=t.matched.some((function(t){return t.meta.requiresAuth}));o&&!i?a("login"):!o&&i?a("home"):a()}));var ge=he,ve=a("f309");i["a"].use(ve["a"]);var fe=new ve["a"]({icons:{iconfont:"mdi"}});i["a"].use(_["a"]);var be=new _["a"].Store({state:{usuario:{nombre:null,email:null,apellido:null,telefono:null,foto:null}},getters:{getUsuario:function(t){return t.usuario}},mutations:{setUsuarioNombre:function(t,e){t.usuario.nombre=e}},actions:{guardarUsuario:function(t,e){t.commit("setUsuarioNombre",e.nombre)}}}),ye=a("9483");Object(ye["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var we,xe=a("d842"),ke=a("2536"),_e=a.n(ke),Se=a("755e"),Ce=a("30ef");a("2440"),i["a"].use(xe["a"].use(Ce)),i["a"].use(_e.a),i["a"].use(Se,{load:{key:"AIzaSyDMDkK1YoUOjnJFx4WVeh0T0yOglbSYfYQ",libraries:"places,drawing,visualization"}}),i["a"].config.productionTip=!1,l["initializeApp"]({apiKey:"AIzaSyCnHo7J8e4ZT-Tw3vjAIIUWUVQFtg0gFN8",authDomain:"vue-firebase-tutorial-7ee46.firebaseapp.com",databaseURL:"https://vue-firebase-tutorial-7ee46.firebaseio.com",projectId:"vue-firebase-tutorial-7ee46",storageBucket:"vue-firebase-tutorial-7ee46.appspot.com",messagingSenderId:"24087531277",appId:"1:24087531277:web:b4ace0b15ec05794cdea44"});var De=l["firestore"];console.log(De),l["auth"]().onAuthStateChanged((function(){we||(we=new i["a"]({el:"#app",components:{App:f},template:"<App/>",router:ge,store:be,vuetify:fe,render:function(t){return t(f)}}).$mount("#app"))}))}});
//# sourceMappingURL=app.8c8c2815.js.map